2023-03-20 00:00:13.576 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 00:00:13.675 +01:00 [DBG] Hosting starting
2023-03-20 00:00:13.779 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 00:00:13.806 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 00:00:13.807 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 00:00:13.807 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 00:00:13.808 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 00:00:13.808 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 00:00:13.809 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 00:00:13.810 +01:00 [INF] Hosting environment: Development
2023-03-20 00:00:13.811 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 00:00:13.811 +01:00 [DBG] Hosting started
2023-03-20 00:00:13.867 +01:00 [DBG] Connection id "0HMP8PMPF3G0A" accepted.
2023-03-20 00:00:13.867 +01:00 [DBG] Connection id "0HMP8PMPF3G0B" accepted.
2023-03-20 00:00:13.869 +01:00 [DBG] Connection id "0HMP8PMPF3G0B" started.
2023-03-20 00:00:13.869 +01:00 [DBG] Connection id "0HMP8PMPF3G0A" started.
2023-03-20 00:00:13.896 +01:00 [DBG] Connection id "0HMP8PMPF3G0B" received FIN.
2023-03-20 00:00:13.896 +01:00 [DBG] Connection id "0HMP8PMPF3G0A" received FIN.
2023-03-20 00:00:13.919 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:00:13.919 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:00:13.951 +01:00 [DBG] Connection id "0HMP8PMPF3G0B" stopped.
2023-03-20 00:00:13.951 +01:00 [DBG] Connection id "0HMP8PMPF3G0A" stopped.
2023-03-20 00:00:13.954 +01:00 [DBG] Connection id "0HMP8PMPF3G0B" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:00:13.954 +01:00 [DBG] Connection id "0HMP8PMPF3G0A" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:00:14.646 +01:00 [DBG] Connection id "0HMP8PMPF3G0C" accepted.
2023-03-20 00:00:14.647 +01:00 [DBG] Connection id "0HMP8PMPF3G0C" started.
2023-03-20 00:00:14.679 +01:00 [DBG] Connection 0HMP8PMPF3G0C established using the following protocol: "Tls13"
2023-03-20 00:00:14.727 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 00:00:14.761 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 00:00:14.847 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 00:00:14.951 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 00:00:14.956 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 231.2585ms
2023-03-20 00:00:14.962 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 00:00:14.966 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.7894ms
2023-03-20 00:00:14.970 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 00:00:14.988 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.6845ms
2023-03-20 00:00:15.063 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 00:00:15.164 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 101.4996ms
2023-03-20 00:00:34.288 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 00:00:34.291 +01:00 [DBG] POST requests are not supported
2023-03-20 00:00:34.310 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 00:00:34.313 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 00:00:34.315 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:00:34.318 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:00:34.345 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 00:00:34.348 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 00:00:34.349 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 00:00:34.350 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 00:00:34.351 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 00:00:34.352 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 00:00:34.354 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:00:34.464 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 00:00:34.669 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:00:34.673 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:00:34.675 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 00:00:34.676 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:00:34.677 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:00:34.678 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:00:34.679 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:00:34.682 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:00:34.682 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 00:00:34.683 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:00:34.684 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:00:34.685 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:00:34.686 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:00:34.687 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:00:34.688 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 00:00:34.690 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:00:34.691 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:00:34.697 +01:00 [DBG] Connection id "0HMP8PMPF3G0C", Request id "0HMP8PMPF3G0C:00000009": started reading request body.
2023-03-20 00:00:34.698 +01:00 [DBG] Connection id "0HMP8PMPF3G0C", Request id "0HMP8PMPF3G0C:00000009": done reading request body.
2023-03-20 00:00:34.807 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:00:34.808 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:00:34.809 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:00:34.815 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:00:41.914 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 00:00:41.940 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 00:00:42.116 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 00:00:42.156 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 00:00:42.219 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-03-20 00:00:42.229 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:00:42.246 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:00:42.256 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:00:42.276 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:00:42.293 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:00:42.314 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:00:42.315 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:00:42.321 +01:00 [DBG] A data reader was disposed.
2023-03-20 00:00:42.328 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:00:42.334 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:00:43.207 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 00:00:43.210 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:00:43.222 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:00:43.226 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 00:00:44.343 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 00:00:44.349 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 00:00:44.351 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 00:00:44.352 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 00:00:44.357 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 10000.2017ms
2023-03-20 00:00:44.358 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:00:44.363 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 00:00:44.367 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 406 0 - 10078.6521ms
2023-03-20 00:00:53.030 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 00:00:53.031 +01:00 [DBG] POST requests are not supported
2023-03-20 00:00:53.031 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 00:00:53.032 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 00:00:53.033 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:00:53.034 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:00:53.036 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 00:00:53.037 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 00:00:53.038 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 00:00:53.039 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 00:00:53.040 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 00:00:53.041 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 00:00:53.042 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:00:53.057 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:00:53.065 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:00:53.065 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 00:00:53.067 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:00:53.068 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:00:53.068 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:00:53.069 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:00:53.070 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:00:53.071 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 00:00:53.072 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:00:53.073 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:00:53.074 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:00:53.074 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:00:53.075 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:00:53.076 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 00:00:53.077 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:00:53.077 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:00:53.078 +01:00 [DBG] Connection id "0HMP8PMPF3G0C", Request id "0HMP8PMPF3G0C:0000000B": started reading request body.
2023-03-20 00:00:53.079 +01:00 [DBG] Connection id "0HMP8PMPF3G0C", Request id "0HMP8PMPF3G0C:0000000B": done reading request body.
2023-03-20 00:00:53.080 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:00:53.081 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:00:53.081 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:00:53.082 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:00:54.393 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 00:00:54.394 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 00:00:54.395 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-03-20 00:00:54.396 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:00:54.397 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:00:54.398 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:00:54.399 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:00:54.401 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:00:54.401 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:00:54.402 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:00:54.403 +01:00 [DBG] A data reader was disposed.
2023-03-20 00:00:54.404 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:00:54.404 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:00:54.899 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 00:00:54.900 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:00:54.901 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:00:54.902 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 00:00:55.488 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 00:00:55.490 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 00:00:55.491 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 00:00:55.492 +01:00 [INF] Executing OkObjectResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 00:00:55.528 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 2485.9257ms
2023-03-20 00:00:55.529 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:00:55.533 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 00:00:55.533 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 200 72 application/json;+charset=utf-8 2503.7608ms
2023-03-20 00:02:32.055 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 00:02:32.142 +01:00 [DBG] Hosting starting
2023-03-20 00:02:32.251 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 00:02:32.274 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 00:02:32.275 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 00:02:32.276 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 00:02:32.277 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 00:02:32.277 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 00:02:32.278 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 00:02:32.279 +01:00 [INF] Hosting environment: Development
2023-03-20 00:02:32.280 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 00:02:32.280 +01:00 [DBG] Hosting started
2023-03-20 00:02:32.361 +01:00 [DBG] Connection id "0HMP8PO2NSFLI" accepted.
2023-03-20 00:02:32.363 +01:00 [DBG] Connection id "0HMP8PO2NSFLI" started.
2023-03-20 00:02:32.365 +01:00 [DBG] Connection id "0HMP8PO2NSFLJ" accepted.
2023-03-20 00:02:32.366 +01:00 [DBG] Connection id "0HMP8PO2NSFLJ" started.
2023-03-20 00:02:32.399 +01:00 [DBG] Connection id "0HMP8PO2NSFLJ" received FIN.
2023-03-20 00:02:32.399 +01:00 [DBG] Connection id "0HMP8PO2NSFLI" received FIN.
2023-03-20 00:02:32.421 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:02:32.421 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:02:32.454 +01:00 [DBG] Connection id "0HMP8PO2NSFLJ" stopped.
2023-03-20 00:02:32.454 +01:00 [DBG] Connection id "0HMP8PO2NSFLI" stopped.
2023-03-20 00:02:32.456 +01:00 [DBG] Connection id "0HMP8PO2NSFLI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:02:32.456 +01:00 [DBG] Connection id "0HMP8PO2NSFLJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:02:32.853 +01:00 [DBG] Connection id "0HMP8PO2NSFLK" accepted.
2023-03-20 00:02:32.854 +01:00 [DBG] Connection id "0HMP8PO2NSFLK" started.
2023-03-20 00:02:32.887 +01:00 [DBG] Connection 0HMP8PO2NSFLK established using the following protocol: "Tls13"
2023-03-20 00:02:32.935 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 00:02:32.963 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 00:02:33.040 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 00:02:33.137 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 00:02:33.138 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 00:02:33.141 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 208.9607ms
2023-03-20 00:02:33.142 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.9909ms
2023-03-20 00:02:33.151 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 00:02:33.168 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.8445ms
2023-03-20 00:02:33.237 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 00:02:33.336 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 98.6804ms
2023-03-20 00:03:09.399 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 00:03:09.402 +01:00 [DBG] POST requests are not supported
2023-03-20 00:03:09.422 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 00:03:09.426 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 00:03:09.427 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:03:09.430 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:03:09.453 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 00:03:09.455 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 00:03:09.456 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 00:03:09.457 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 00:03:09.458 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 00:03:09.459 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 00:03:09.460 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:03:09.565 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 00:03:09.765 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:03:09.769 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:03:09.771 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 00:03:09.773 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:03:09.773 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:03:09.774 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:03:09.776 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:03:09.779 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:03:09.780 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 00:03:09.781 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:03:09.782 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:03:09.783 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:03:09.784 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:03:09.785 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:03:09.787 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 00:03:09.788 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:03:09.790 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:03:09.797 +01:00 [DBG] Connection id "0HMP8PO2NSFLK", Request id "0HMP8PO2NSFLK:00000009": started reading request body.
2023-03-20 00:03:09.799 +01:00 [DBG] Connection id "0HMP8PO2NSFLK", Request id "0HMP8PO2NSFLK:00000009": done reading request body.
2023-03-20 00:03:09.919 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:03:09.921 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:03:09.922 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:03:09.928 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:03:12.285 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 00:03:12.315 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 00:03:12.493 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 00:03:12.535 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 00:03:12.598 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (60ms).
2023-03-20 00:03:12.607 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:03:12.620 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:03:12.630 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:03:12.646 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:03:12.664 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:03:12.683 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:03:12.684 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:03:12.691 +01:00 [DBG] A data reader was disposed.
2023-03-20 00:03:12.697 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:03:12.703 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:03:25.208 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:03:25.221 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:03:40.459 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:03:40.460 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:04:04.140 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 00:04:04.141 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:04:04.142 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:04:04.147 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 00:04:34.537 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:04:34.538 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:12:59.877 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 00:12:59.970 +01:00 [DBG] Hosting starting
2023-03-20 00:13:00.078 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 00:13:00.116 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 00:13:00.117 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 00:13:00.118 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 00:13:00.119 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 00:13:00.120 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 00:13:00.121 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 00:13:00.122 +01:00 [INF] Hosting environment: Development
2023-03-20 00:13:00.122 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 00:13:00.123 +01:00 [DBG] Hosting started
2023-03-20 00:13:00.180 +01:00 [DBG] Connection id "0HMP8PTTR7M78" accepted.
2023-03-20 00:13:00.182 +01:00 [DBG] Connection id "0HMP8PTTR7M78" started.
2023-03-20 00:13:00.184 +01:00 [DBG] Connection id "0HMP8PTTR7M79" accepted.
2023-03-20 00:13:00.185 +01:00 [DBG] Connection id "0HMP8PTTR7M79" started.
2023-03-20 00:13:00.218 +01:00 [DBG] Connection id "0HMP8PTTR7M78" received FIN.
2023-03-20 00:13:00.218 +01:00 [DBG] Connection id "0HMP8PTTR7M79" received FIN.
2023-03-20 00:13:00.231 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:13:00.231 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:13:00.262 +01:00 [DBG] Connection id "0HMP8PTTR7M79" stopped.
2023-03-20 00:13:00.262 +01:00 [DBG] Connection id "0HMP8PTTR7M78" stopped.
2023-03-20 00:13:00.265 +01:00 [DBG] Connection id "0HMP8PTTR7M79" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:13:00.265 +01:00 [DBG] Connection id "0HMP8PTTR7M78" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:13:00.718 +01:00 [DBG] Connection id "0HMP8PTTR7M7A" accepted.
2023-03-20 00:13:00.719 +01:00 [DBG] Connection id "0HMP8PTTR7M7A" started.
2023-03-20 00:13:00.753 +01:00 [DBG] Connection 0HMP8PTTR7M7A established using the following protocol: "Tls13"
2023-03-20 00:13:00.815 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 00:13:00.850 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 00:13:00.943 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 00:13:01.053 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 00:13:01.056 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 246.6405ms
2023-03-20 00:13:01.062 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 00:13:01.066 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.1073ms
2023-03-20 00:13:01.071 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 00:13:01.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.5864ms
2023-03-20 00:13:01.164 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 00:13:01.262 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 98.1409ms
2023-03-20 00:13:22.190 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 83
2023-03-20 00:13:22.193 +01:00 [DBG] POST requests are not supported
2023-03-20 00:13:22.213 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 00:13:22.218 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 00:13:22.219 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:13:22.222 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:13:22.244 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 00:13:22.247 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 00:13:22.248 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 00:13:22.249 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 00:13:22.250 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 00:13:22.251 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 00:13:22.252 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:13:22.361 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 00:13:22.576 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:13:22.581 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:13:22.583 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 00:13:22.586 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:13:22.587 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:13:22.588 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:13:22.590 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:13:22.593 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:13:22.593 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 00:13:22.594 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:13:22.595 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:13:22.596 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:13:22.596 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:13:22.597 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:13:22.598 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 00:13:22.600 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:13:22.602 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:13:22.612 +01:00 [DBG] Connection id "0HMP8PTTR7M7A", Request id "0HMP8PTTR7M7A:00000009": started reading request body.
2023-03-20 00:13:22.614 +01:00 [DBG] Connection id "0HMP8PTTR7M7A", Request id "0HMP8PTTR7M7A:00000009": done reading request body.
2023-03-20 00:13:22.743 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:13:22.745 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:13:22.747 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:13:22.754 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:13:28.149 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 00:13:28.178 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 00:13:28.349 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 00:13:28.390 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 00:13:28.465 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2023-03-20 00:13:28.476 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:13:28.491 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:13:28.500 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:13:28.516 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:13:28.532 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:13:28.552 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:13:28.554 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:13:28.560 +01:00 [DBG] A data reader was disposed.
2023-03-20 00:13:28.566 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:13:28.571 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:13:31.820 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 00:13:31.823 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:13:31.838 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:13:31.843 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 00:13:39.732 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 00:13:39.736 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 00:13:39.737 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 00:13:39.738 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 00:13:39.750 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 00:13:39.758 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 00:13:39.759 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 00:13:39.801 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 17542.097ms
2023-03-20 00:13:39.802 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:13:39.806 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 00:13:39.810 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 83 - 201 72 application/json;+charset=utf-8 17619.5702ms
2023-03-20 00:24:13.222 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 00:24:13.304 +01:00 [DBG] Hosting starting
2023-03-20 00:24:13.434 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 00:24:13.463 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 00:24:13.464 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 00:24:13.465 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 00:24:13.466 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 00:24:13.467 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 00:24:13.468 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 00:24:13.469 +01:00 [INF] Hosting environment: Development
2023-03-20 00:24:13.470 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 00:24:13.471 +01:00 [DBG] Hosting started
2023-03-20 00:24:13.613 +01:00 [DBG] Connection id "0HMP8Q46HJ1A7" accepted.
2023-03-20 00:24:13.615 +01:00 [DBG] Connection id "0HMP8Q46HJ1A7" started.
2023-03-20 00:24:13.617 +01:00 [DBG] Connection id "0HMP8Q46HJ1A8" accepted.
2023-03-20 00:24:13.618 +01:00 [DBG] Connection id "0HMP8Q46HJ1A8" started.
2023-03-20 00:24:13.635 +01:00 [DBG] Connection id "0HMP8Q46HJ1A7" received FIN.
2023-03-20 00:24:13.635 +01:00 [DBG] Connection id "0HMP8Q46HJ1A8" received FIN.
2023-03-20 00:24:13.652 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:24:13.652 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:24:13.683 +01:00 [DBG] Connection id "0HMP8Q46HJ1A7" stopped.
2023-03-20 00:24:13.683 +01:00 [DBG] Connection id "0HMP8Q46HJ1A8" stopped.
2023-03-20 00:24:13.686 +01:00 [DBG] Connection id "0HMP8Q46HJ1A8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:24:13.686 +01:00 [DBG] Connection id "0HMP8Q46HJ1A7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:24:14.025 +01:00 [DBG] Connection id "0HMP8Q46HJ1A9" accepted.
2023-03-20 00:24:14.026 +01:00 [DBG] Connection id "0HMP8Q46HJ1A9" started.
2023-03-20 00:24:14.074 +01:00 [DBG] Connection 0HMP8Q46HJ1A9 established using the following protocol: "Tls13"
2023-03-20 00:24:14.134 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 00:24:14.178 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 00:24:14.270 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 00:24:14.376 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 00:24:14.377 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 00:24:14.382 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 252.2082ms
2023-03-20 00:24:14.384 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 7.0763ms
2023-03-20 00:24:14.394 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 00:24:14.410 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.5513ms
2023-03-20 00:24:14.485 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 00:24:14.583 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 98.7168ms
2023-03-20 00:24:35.152 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 81
2023-03-20 00:24:35.156 +01:00 [DBG] POST requests are not supported
2023-03-20 00:24:35.179 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 00:24:35.184 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 00:24:35.185 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:24:35.188 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:24:35.212 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 00:24:35.214 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 00:24:35.215 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 00:24:35.216 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 00:24:35.218 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 00:24:35.219 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 00:24:35.220 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:24:35.333 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 00:24:35.528 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:24:35.531 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:24:35.533 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 00:24:35.535 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:24:35.536 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:24:35.537 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:24:35.538 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:24:35.540 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:24:35.542 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 00:24:35.543 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:24:35.544 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:24:35.545 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:24:35.546 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:24:35.547 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:24:35.549 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 00:24:35.551 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:24:35.552 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:24:35.560 +01:00 [DBG] Connection id "0HMP8Q46HJ1A9", Request id "0HMP8Q46HJ1A9:00000009": started reading request body.
2023-03-20 00:24:35.561 +01:00 [DBG] Connection id "0HMP8Q46HJ1A9", Request id "0HMP8Q46HJ1A9:00000009": done reading request body.
2023-03-20 00:24:35.670 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:24:35.671 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:24:35.672 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:24:35.680 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:24:36.225 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 00:24:36.254 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 00:24:36.416 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 00:24:36.455 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 00:24:36.506 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (48ms).
2023-03-20 00:24:36.517 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:24:36.531 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:24:36.541 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:24:36.559 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:24:36.576 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:24:36.598 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:24:36.599 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:24:36.605 +01:00 [DBG] A data reader was disposed.
2023-03-20 00:24:36.613 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:24:36.618 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:24:36.626 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 00:24:36.628 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:24:36.642 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:24:36.647 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 00:24:43.814 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 8590.2757ms
2023-03-20 00:24:43.817 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:24:43.818 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at RabbitMQ.Client.Impl.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 19
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 00:24:43.852 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 00:24:43.858 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 81 - 500 - text/plain;+charset=utf-8 8705.1199ms
2023-03-20 00:26:35.550 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 00:26:45.564 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:26:45.569 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0667ms - processed: 0 items - remaining: 1 items
2023-03-20 00:26:55.586 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:26:55.587 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2023-03-20 00:27:05.601 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:27:05.603 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2023-03-20 00:27:15.617 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:27:15.619 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2023-03-20 00:27:25.623 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:27:25.624 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 00:27:35.634 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:27:35.635 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2023-03-20 00:27:45.641 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:27:45.642 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 00:27:55.650 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:27:55.652 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2023-03-20 00:28:05.660 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:28:05.661 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2023-03-20 00:28:15.665 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:28:15.667 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0083ms - processed: 0 items - remaining: 1 items
2023-03-20 00:28:25.684 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:28:25.686 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.005ms - processed: 0 items - remaining: 1 items
2023-03-20 00:28:35.709 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:28:35.710 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2023-03-20 00:28:45.715 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:28:45.717 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2023-03-20 00:28:55.721 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:28:55.723 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 00:29:05.735 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:29:05.737 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2023-03-20 00:29:15.739 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:29:15.741 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2023-03-20 00:29:25.746 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:29:25.747 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2023-03-20 00:29:35.763 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:29:35.764 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 00:29:45.773 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:29:45.774 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 00:29:55.784 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:29:55.786 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2023-03-20 00:30:05.797 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:30:05.798 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2023-03-20 00:30:15.811 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:30:15.812 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2023-03-20 00:30:25.825 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:30:25.827 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2023-03-20 00:30:35.835 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:30:35.836 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2023-03-20 00:30:45.845 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:30:45.846 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 00:30:55.849 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:30:55.850 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 00:31:05.854 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:31:05.855 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2023-03-20 00:31:15.868 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:31:15.870 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2023-03-20 00:31:25.872 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:31:25.874 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 00:31:35.877 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:31:35.878 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2023-03-20 00:31:45.891 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:31:45.893 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2023-03-20 00:31:55.900 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:31:55.901 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0058ms - processed: 0 items - remaining: 1 items
2023-03-20 00:32:05.911 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:32:05.912 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2023-03-20 00:32:15.941 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:32:15.942 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 00:32:25.947 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:32:25.949 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 00:32:35.957 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:32:35.958 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2023-03-20 00:32:45.977 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:32:45.979 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 00:32:55.989 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:32:55.991 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2023-03-20 00:33:06.001 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:33:06.002 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 00:33:16.005 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:33:16.007 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 00:55:41.384 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 00:55:41.461 +01:00 [DBG] Hosting starting
2023-03-20 00:55:41.562 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 00:55:41.593 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 00:55:41.593 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 00:55:41.594 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 00:55:41.595 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 00:55:41.595 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 00:55:41.596 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 00:55:41.597 +01:00 [INF] Hosting environment: Development
2023-03-20 00:55:41.598 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 00:55:41.598 +01:00 [DBG] Hosting started
2023-03-20 00:55:41.714 +01:00 [DBG] Connection id "0HMP8QLP7TPNI" accepted.
2023-03-20 00:55:41.714 +01:00 [DBG] Connection id "0HMP8QLP7TPNJ" accepted.
2023-03-20 00:55:41.716 +01:00 [DBG] Connection id "0HMP8QLP7TPNI" started.
2023-03-20 00:55:41.716 +01:00 [DBG] Connection id "0HMP8QLP7TPNJ" started.
2023-03-20 00:55:41.726 +01:00 [DBG] Connection id "0HMP8QLP7TPNI" received FIN.
2023-03-20 00:55:41.726 +01:00 [DBG] Connection id "0HMP8QLP7TPNJ" received FIN.
2023-03-20 00:55:41.742 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:55:41.742 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 00:55:41.771 +01:00 [DBG] Connection id "0HMP8QLP7TPNI" stopped.
2023-03-20 00:55:41.771 +01:00 [DBG] Connection id "0HMP8QLP7TPNJ" stopped.
2023-03-20 00:55:41.773 +01:00 [DBG] Connection id "0HMP8QLP7TPNI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:55:41.773 +01:00 [DBG] Connection id "0HMP8QLP7TPNJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 00:55:42.999 +01:00 [DBG] Connection id "0HMP8QLP7TPNK" accepted.
2023-03-20 00:55:43.000 +01:00 [DBG] Connection id "0HMP8QLP7TPNK" started.
2023-03-20 00:55:43.055 +01:00 [DBG] Connection 0HMP8QLP7TPNK established using the following protocol: "Tls13"
2023-03-20 00:55:43.147 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 00:55:43.194 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 00:55:43.300 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 00:55:43.476 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 00:55:43.482 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 00:55:43.482 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 342.9159ms
2023-03-20 00:55:43.488 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.8823ms
2023-03-20 00:55:43.498 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 00:55:43.609 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 110.7358ms
2023-03-20 00:55:43.691 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 00:55:43.830 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 138.5151ms
2023-03-20 00:56:03.295 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 00:56:03.299 +01:00 [DBG] POST requests are not supported
2023-03-20 00:56:03.320 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 00:56:03.324 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 00:56:03.326 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:56:03.329 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:56:03.354 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 00:56:03.357 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 00:56:03.358 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 00:56:03.360 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 00:56:03.361 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 00:56:03.362 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 00:56:03.364 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:56:03.490 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 00:56:03.684 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 00:56:03.687 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:56:03.689 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 00:56:03.690 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:56:03.691 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:56:03.692 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 00:56:03.697 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 00:56:03.699 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:56:03.700 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 00:56:03.701 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:56:03.702 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:56:03.703 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 00:56:03.703 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 00:56:03.704 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:56:03.705 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 00:56:03.706 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:56:03.707 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 00:56:03.715 +01:00 [DBG] Connection id "0HMP8QLP7TPNK", Request id "0HMP8QLP7TPNK:00000009": started reading request body.
2023-03-20 00:56:03.716 +01:00 [DBG] Connection id "0HMP8QLP7TPNK", Request id "0HMP8QLP7TPNK:00000009": done reading request body.
2023-03-20 00:56:03.828 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:56:03.829 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:56:03.830 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 00:56:03.837 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 00:56:04.386 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 00:56:04.415 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 00:56:04.576 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 00:56:04.615 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 00:56:04.675 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (56ms).
2023-03-20 00:56:04.685 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:56:04.700 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:56:04.710 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:56:04.736 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 00:56:04.752 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:56:04.772 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:56:04.773 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 00:56:04.779 +01:00 [DBG] A data reader was disposed.
2023-03-20 00:56:04.786 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 00:56:04.791 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 00:56:04.797 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 00:56:04.799 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 00:56:04.812 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 00:56:04.817 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 00:56:05.007 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 00:56:05.011 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 00:56:05.012 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 00:56:05.013 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 00:56:05.026 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 00:56:05.034 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 00:56:05.035 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 00:56:05.076 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1708.1093ms
2023-03-20 00:56:05.077 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 00:56:05.082 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 00:56:05.085 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 201 70 application/json;+charset=utf-8 1789.5139ms
2023-03-20 00:58:03.707 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 00:58:13.728 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:58:13.733 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0904ms - processed: 0 items - remaining: 1 items
2023-03-20 00:58:23.745 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:58:23.746 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0094ms - processed: 0 items - remaining: 1 items
2023-03-20 00:58:33.752 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:58:33.753 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 00:58:43.762 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:58:43.763 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2023-03-20 00:58:53.766 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:58:53.767 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2023-03-20 00:59:03.783 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:59:03.784 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2023-03-20 00:59:13.805 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:59:13.806 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2023-03-20 00:59:23.814 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:59:23.816 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2023-03-20 00:59:33.821 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:59:33.822 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 00:59:43.824 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:59:43.825 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 00:59:53.831 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 00:59:53.832 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2023-03-20 01:00:03.841 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:00:03.842 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 01:00:13.846 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:00:13.847 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2023-03-20 01:00:23.848 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:00:23.849 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2023-03-20 01:00:33.861 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:00:33.862 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0042ms - processed: 0 items - remaining: 1 items
2023-03-20 01:00:43.867 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:00:43.868 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2023-03-20 01:00:53.877 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:00:53.878 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2023-03-20 01:01:03.880 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:01:03.881 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 01:01:13.894 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:01:13.896 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2023-03-20 01:01:23.898 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:01:23.899 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 01:01:33.915 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:01:33.916 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 01:01:43.917 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:01:43.919 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2023-03-20 01:01:53.920 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:01:53.921 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 01:02:03.932 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:02:03.933 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2023-03-20 01:02:13.945 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:02:13.947 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2023-03-20 01:02:23.964 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:02:23.966 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 01:02:33.976 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:02:33.978 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 01:02:43.993 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:02:43.994 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2023-03-20 01:02:54.008 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:02:54.009 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0057ms - processed: 0 items - remaining: 1 items
2023-03-20 01:03:04.023 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:03:04.025 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 01:03:14.040 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:03:14.041 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2023-03-20 01:03:24.052 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:03:24.053 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 01:03:34.058 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:03:34.059 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2023-03-20 01:03:44.065 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:03:44.066 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 01:03:54.084 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:03:54.085 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 01:04:04.096 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:04:04.097 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 01:04:14.113 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 01:04:14.113 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 19:18:09.061 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:18:25.540 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:18:25.618 +01:00 [DBG] Hosting starting
2023-03-20 19:18:25.764 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:18:25.796 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:18:25.797 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:18:25.798 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:18:25.798 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:18:25.799 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:18:25.800 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:18:25.801 +01:00 [INF] Hosting environment: Development
2023-03-20 19:18:25.802 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:18:25.803 +01:00 [DBG] Hosting started
2023-03-20 19:18:25.902 +01:00 [DBG] Connection id "0HMP9DTVMPKPK" reset.
2023-03-20 19:18:25.904 +01:00 [DBG] Connection id "0HMP9DTVMPKPJ" accepted.
2023-03-20 19:18:25.904 +01:00 [DBG] Connection id "0HMP9DTVMPKPJ" received FIN.
2023-03-20 19:18:25.906 +01:00 [DBG] Connection id "0HMP9DTVMPKPK" accepted.
2023-03-20 19:18:25.908 +01:00 [DBG] Connection id "0HMP9DTVMPKPJ" started.
2023-03-20 19:18:25.909 +01:00 [DBG] Connection id "0HMP9DTVMPKPK" started.
2023-03-20 19:18:25.937 +01:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:18:25.937 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:18:25.982 +01:00 [DBG] Connection id "0HMP9DTVMPKPK" stopped.
2023-03-20 19:18:25.982 +01:00 [DBG] Connection id "0HMP9DTVMPKPJ" stopped.
2023-03-20 19:18:25.992 +01:00 [DBG] Connection id "0HMP9DTVMPKPJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:18:25.992 +01:00 [DBG] Connection id "0HMP9DTVMPKPK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:18:26.761 +01:00 [DBG] Connection id "0HMP9DTVMPKPL" accepted.
2023-03-20 19:18:26.765 +01:00 [DBG] Connection id "0HMP9DTVMPKPL" started.
2023-03-20 19:18:26.840 +01:00 [DBG] Connection 0HMP9DTVMPKPL established using the following protocol: "Tls13"
2023-03-20 19:18:26.914 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:18:26.959 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:18:27.045 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:18:27.192 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:18:27.195 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:18:27.198 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.0377ms
2023-03-20 19:18:27.198 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 288.9183ms
2023-03-20 19:18:27.344 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:18:27.389 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 44.5268ms
2023-03-20 19:18:27.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:18:27.562 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 100.6150ms
2023-03-20 19:19:57.894 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 19:19:57.899 +01:00 [DBG] POST requests are not supported
2023-03-20 19:19:57.917 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:19:57.920 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:19:57.921 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:19:57.924 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:19:57.946 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:19:57.948 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:19:57.948 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:19:57.949 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:19:57.951 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:19:57.952 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:19:57.953 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:19:58.079 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:19:58.274 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:19:58.278 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:19:58.279 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:19:58.281 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:19:58.281 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:19:58.282 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:19:58.284 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:19:58.286 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:19:58.286 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:19:58.287 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:19:58.288 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:19:58.289 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:19:58.289 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:19:58.290 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:19:58.291 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:19:58.293 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:19:58.294 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:19:58.302 +01:00 [DBG] Connection id "0HMP9DTVMPKPL", Request id "0HMP9DTVMPKPL:00000009": started reading request body.
2023-03-20 19:19:58.303 +01:00 [DBG] Connection id "0HMP9DTVMPKPL", Request id "0HMP9DTVMPKPL:00000009": done reading request body.
2023-03-20 19:19:58.414 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:19:58.415 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:19:58.416 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:19:58.422 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:19:58.926 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:19:58.953 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:19:59.119 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:19:59.158 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:19:59.335 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (174ms).
2023-03-20 19:19:59.345 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:19:59.368 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:19:59.378 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:19:59.399 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:19:59.416 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:19:59.437 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:19:59.438 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:19:59.444 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:19:59.450 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:19:59.456 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:19:59.462 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:19:59.464 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:19:59.477 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:19:59.481 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:19:59.679 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1722.5165ms
2023-03-20 19:19:59.681 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:19:59.683 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:19:59.703 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:19:59.707 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 500 - text/plain;+charset=utf-8 1813.4015ms
2023-03-20 19:20:43.236 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 19:20:43.239 +01:00 [DBG] POST requests are not supported
2023-03-20 19:20:43.240 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:20:43.241 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:20:43.242 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:20:43.242 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:20:43.243 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:20:43.244 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:20:43.245 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:20:43.246 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:20:43.247 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:20:43.248 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:20:43.249 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:20:43.263 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:20:43.266 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:20:43.267 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:20:43.268 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:20:43.269 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:20:43.270 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:20:43.270 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:20:43.271 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:20:43.272 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:20:43.273 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:20:43.274 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:20:43.274 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:20:43.275 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:20:43.276 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:20:43.277 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:20:43.278 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:20:43.278 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:20:43.279 +01:00 [DBG] Connection id "0HMP9DTVMPKPL", Request id "0HMP9DTVMPKPL:0000000B": started reading request body.
2023-03-20 19:20:43.280 +01:00 [DBG] Connection id "0HMP9DTVMPKPL", Request id "0HMP9DTVMPKPL:0000000B": done reading request body.
2023-03-20 19:20:43.281 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:20:43.282 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:20:43.283 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:20:43.284 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:20:43.286 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:20:43.287 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:20:43.291 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-03-20 19:20:43.292 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:20:43.293 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:20:43.293 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:20:43.295 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:20:43.296 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:20:43.296 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:20:43.297 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:20:43.298 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:20:43.299 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:20:43.301 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:20:43.302 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:20:43.303 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:20:43.303 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:20:43.304 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:20:43.332 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 82.9026ms
2023-03-20 19:20:43.333 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:20:43.335 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:20:43.340 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:20:43.340 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 500 - text/plain;+charset=utf-8 104.8441ms
2023-03-20 19:21:57.571 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 19:21:57.574 +01:00 [DBG] POST requests are not supported
2023-03-20 19:21:57.574 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:21:57.575 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:21:57.576 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:21:57.576 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:21:57.577 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:21:57.579 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:21:57.579 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:21:57.580 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:21:57.582 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:21:57.583 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:21:57.584 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:21:57.586 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:21:57.587 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:21:57.588 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:21:57.589 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:21:57.590 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:21:57.591 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:21:57.591 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:21:57.592 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:21:57.593 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:21:57.594 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:21:57.595 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:21:57.595 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:21:57.596 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:21:57.597 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:21:57.598 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:21:57.599 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:21:57.599 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:21:57.600 +01:00 [DBG] Connection id "0HMP9DTVMPKPL", Request id "0HMP9DTVMPKPL:0000000D": started reading request body.
2023-03-20 19:21:57.601 +01:00 [DBG] Connection id "0HMP9DTVMPKPL", Request id "0HMP9DTVMPKPL:0000000D": done reading request body.
2023-03-20 19:21:57.602 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:21:57.602 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:21:57.603 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:21:57.604 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:22:13.700 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:22:13.728 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:22:13.730 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:22:13.731 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-03-20 19:22:13.732 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:22:13.732 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:22:13.733 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:22:13.734 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:22:13.735 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:22:13.736 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:22:13.737 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:22:13.738 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:22:13.738 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:22:13.739 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:22:14.577 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:22:14.578 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:22:14.578 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:22:14.579 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:22:25.645 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:22:27.506 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 39.0088ms - processed: 0 items - remaining: 1 items
2023-03-20 19:22:27.549 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 29965.5815ms
2023-03-20 19:22:27.554 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:22:27.562 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:22:27.566 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:22:27.567 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 500 - text/plain;+charset=utf-8 29996.4130ms
2023-03-20 19:22:37.538 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:22:37.539 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2023-03-20 19:22:47.547 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:22:47.549 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 19:23:17.821 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:23:17.898 +01:00 [DBG] Hosting starting
2023-03-20 19:23:18.003 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:23:18.027 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:23:18.028 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:23:18.029 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:23:18.029 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:23:18.030 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:23:18.031 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:23:18.032 +01:00 [INF] Hosting environment: Development
2023-03-20 19:23:18.033 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:23:18.033 +01:00 [DBG] Hosting started
2023-03-20 19:23:18.316 +01:00 [DBG] Connection id "0HMP9E0MRFP0U" received FIN.
2023-03-20 19:23:18.316 +01:00 [DBG] Connection id "0HMP9E0MRFP0T" received FIN.
2023-03-20 19:23:18.323 +01:00 [DBG] Connection id "0HMP9E0MRFP0U" accepted.
2023-03-20 19:23:18.323 +01:00 [DBG] Connection id "0HMP9E0MRFP0T" accepted.
2023-03-20 19:23:18.325 +01:00 [DBG] Connection id "0HMP9E0MRFP0U" started.
2023-03-20 19:23:18.325 +01:00 [DBG] Connection id "0HMP9E0MRFP0T" started.
2023-03-20 19:23:18.338 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:23:18.338 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:23:18.366 +01:00 [DBG] Connection id "0HMP9E0MRFP0T" stopped.
2023-03-20 19:23:18.366 +01:00 [DBG] Connection id "0HMP9E0MRFP0U" stopped.
2023-03-20 19:23:18.374 +01:00 [DBG] Connection id "0HMP9E0MRFP0U" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:23:18.374 +01:00 [DBG] Connection id "0HMP9E0MRFP0T" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:23:18.829 +01:00 [DBG] Connection id "0HMP9E0MRFP0V" accepted.
2023-03-20 19:23:18.830 +01:00 [DBG] Connection id "0HMP9E0MRFP0V" started.
2023-03-20 19:23:18.874 +01:00 [DBG] Connection 0HMP9E0MRFP0V established using the following protocol: "Tls13"
2023-03-20 19:23:18.983 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:23:19.026 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:23:19.123 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:23:19.220 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:23:19.221 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:23:19.224 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 247.2944ms
2023-03-20 19:23:19.224 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.9871ms
2023-03-20 19:23:19.232 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:23:19.254 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.4065ms
2023-03-20 19:23:19.408 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:23:19.522 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.9303ms
2023-03-20 19:23:34.538 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 19:23:34.541 +01:00 [DBG] POST requests are not supported
2023-03-20 19:23:34.558 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:23:34.562 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:23:34.563 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:23:34.565 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:23:34.586 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:23:34.587 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:23:34.588 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:23:34.589 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:23:34.590 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:23:34.591 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:23:34.592 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:23:34.696 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:23:34.887 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:23:34.890 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:23:34.892 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:23:34.893 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:23:34.894 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:23:34.895 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:23:34.897 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:23:34.899 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:23:34.899 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:23:34.900 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:23:34.901 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:23:34.902 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:23:34.903 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:23:34.903 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:23:34.905 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:23:34.906 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:23:34.907 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:23:34.913 +01:00 [DBG] Connection id "0HMP9E0MRFP0V", Request id "0HMP9E0MRFP0V:00000009": started reading request body.
2023-03-20 19:23:34.915 +01:00 [DBG] Connection id "0HMP9E0MRFP0V", Request id "0HMP9E0MRFP0V:00000009": done reading request body.
2023-03-20 19:23:35.013 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:23:35.014 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:23:35.015 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:23:35.020 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:23:37.595 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:23:37.622 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:23:37.769 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:23:37.806 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:23:37.854 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (46ms).
2023-03-20 19:23:37.864 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:23:37.878 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:23:37.887 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:23:37.908 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:23:37.923 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:23:37.941 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:23:37.942 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:23:37.949 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:23:37.956 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:23:37.960 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:23:37.967 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:23:37.970 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:23:37.982 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:23:37.986 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:23:38.939 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:23:38.943 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 19:23:38.944 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 19:23:38.945 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 19:23:38.956 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 19:23:38.973 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 19:23:38.975 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 19:23:39.015 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 4418.8612ms
2023-03-20 19:23:39.016 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:23:39.020 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:23:39.023 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 201 72 application/json;+charset=utf-8 4485.0947ms
2023-03-20 19:27:53.111 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:27:53.190 +01:00 [DBG] Hosting starting
2023-03-20 19:27:53.306 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:27:53.341 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:27:53.342 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:27:53.342 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:27:53.343 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:27:53.344 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:27:53.345 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:27:53.346 +01:00 [INF] Hosting environment: Development
2023-03-20 19:27:53.347 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:27:53.347 +01:00 [DBG] Hosting started
2023-03-20 19:27:53.700 +01:00 [DBG] Connection id "0HMP9E38TNHPQ" accepted.
2023-03-20 19:27:53.702 +01:00 [DBG] Connection id "0HMP9E38TNHPR" accepted.
2023-03-20 19:27:53.703 +01:00 [DBG] Connection id "0HMP9E38TNHPQ" started.
2023-03-20 19:27:53.703 +01:00 [DBG] Connection id "0HMP9E38TNHPR" started.
2023-03-20 19:27:53.722 +01:00 [DBG] Connection id "0HMP9E38TNHPQ" received FIN.
2023-03-20 19:27:53.722 +01:00 [DBG] Connection id "0HMP9E38TNHPR" received FIN.
2023-03-20 19:27:53.758 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:27:53.758 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:27:53.811 +01:00 [DBG] Connection id "0HMP9E38TNHPQ" stopped.
2023-03-20 19:27:53.811 +01:00 [DBG] Connection id "0HMP9E38TNHPR" stopped.
2023-03-20 19:27:53.814 +01:00 [DBG] Connection id "0HMP9E38TNHPR" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:27:53.814 +01:00 [DBG] Connection id "0HMP9E38TNHPQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:27:54.256 +01:00 [DBG] Connection id "0HMP9E38TNHPS" accepted.
2023-03-20 19:27:54.257 +01:00 [DBG] Connection id "0HMP9E38TNHPS" started.
2023-03-20 19:27:54.293 +01:00 [DBG] Connection 0HMP9E38TNHPS established using the following protocol: "Tls13"
2023-03-20 19:27:54.352 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:27:54.393 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:27:54.484 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:27:54.589 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:27:54.594 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 248.6338ms
2023-03-20 19:27:54.596 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:27:54.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.0933ms
2023-03-20 19:27:54.609 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:27:54.626 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.7533ms
2023-03-20 19:27:54.687 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:27:54.785 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 98.1128ms
2023-03-20 19:28:12.295 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:28:12.298 +01:00 [DBG] POST requests are not supported
2023-03-20 19:28:12.316 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:28:12.320 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:28:12.321 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:28:12.323 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:28:12.344 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:28:12.346 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:28:12.347 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:28:12.349 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:28:12.350 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:28:12.351 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:28:12.352 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:28:12.460 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:28:12.648 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:28:12.651 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:28:12.653 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:28:12.654 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:28:12.655 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:28:12.656 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:28:12.657 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:28:12.659 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:28:12.660 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:28:12.661 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:28:12.662 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:28:12.662 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:28:12.663 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:28:12.664 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:28:12.665 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:28:12.667 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:28:12.667 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:28:12.674 +01:00 [DBG] Connection id "0HMP9E38TNHPS", Request id "0HMP9E38TNHPS:00000009": started reading request body.
2023-03-20 19:28:12.675 +01:00 [DBG] Connection id "0HMP9E38TNHPS", Request id "0HMP9E38TNHPS:00000009": done reading request body.
2023-03-20 19:28:12.775 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:28:12.776 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:28:12.776 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:28:12.782 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:28:15.557 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:28:15.584 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:28:15.732 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:28:15.770 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:28:15.815 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (42ms).
2023-03-20 19:28:15.824 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:28:15.838 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:28:15.847 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:28:15.868 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:28:15.884 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:28:15.902 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:28:15.903 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:28:15.909 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:28:15.916 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:28:15.922 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:28:15.928 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:28:15.931 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:28:15.943 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:28:15.948 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:28:16.856 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:28:16.860 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 19:28:16.862 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 19:28:16.863 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 19:28:16.867 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 4512.6956ms
2023-03-20 19:28:16.869 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:28:16.873 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:28:16.876 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 406 0 - 4581.3781ms
2023-03-20 19:29:40.915 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:29:40.921 +01:00 [DBG] POST requests are not supported
2023-03-20 19:29:40.922 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:29:40.922 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:29:40.923 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:29:40.924 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:29:40.925 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:29:40.926 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:29:40.927 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:29:40.928 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:29:40.929 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:29:40.930 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:29:40.931 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:29:40.937 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:29:40.941 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:29:40.942 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:29:40.943 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:29:40.944 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:29:40.944 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:29:40.945 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:29:40.946 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:29:40.947 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:29:40.948 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:29:40.948 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:29:40.949 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:29:40.950 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:29:40.951 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:29:40.951 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:29:40.952 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:29:40.953 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:29:40.954 +01:00 [DBG] Connection id "0HMP9E38TNHPS", Request id "0HMP9E38TNHPS:0000000B": started reading request body.
2023-03-20 19:29:40.955 +01:00 [DBG] Connection id "0HMP9E38TNHPS", Request id "0HMP9E38TNHPS:0000000B": done reading request body.
2023-03-20 19:29:40.955 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:29:40.956 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:29:40.957 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:29:40.958 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:29:44.496 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:29:44.500 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:29:44.501 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-03-20 19:29:44.502 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:29:44.502 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:29:44.503 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:29:44.504 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:29:44.506 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:29:44.506 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:29:44.507 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:29:44.508 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:29:44.508 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:29:44.509 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:29:44.510 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:29:44.510 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:29:44.511 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:29:44.512 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:29:50.361 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 9431.6749ms
2023-03-20 19:29:50.366 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:29:50.374 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:29:50.389 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:29:50.389 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 500 - text/plain;+charset=utf-8 9475.0562ms
2023-03-20 19:30:12.649 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:30:22.661 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:30:22.665 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0506ms - processed: 0 items - remaining: 1 items
2023-03-20 19:30:32.683 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:30:32.683 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2023-03-20 19:30:42.689 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:30:42.690 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 19:30:59.905 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:30:59.981 +01:00 [DBG] Hosting starting
2023-03-20 19:31:00.079 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:31:00.103 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:31:00.104 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:31:00.104 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:31:00.105 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:31:00.105 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:31:00.106 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:31:00.107 +01:00 [INF] Hosting environment: Development
2023-03-20 19:31:00.108 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:31:00.108 +01:00 [DBG] Hosting started
2023-03-20 19:31:00.353 +01:00 [DBG] Connection id "0HMP9E50HQHH2" received FIN.
2023-03-20 19:31:00.362 +01:00 [DBG] Connection id "0HMP9E50HQHH2" accepted.
2023-03-20 19:31:00.363 +01:00 [DBG] Connection id "0HMP9E50HQHH2" started.
2023-03-20 19:31:00.378 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:31:00.403 +01:00 [DBG] Connection id "0HMP9E50HQHH2" stopped.
2023-03-20 19:31:00.406 +01:00 [DBG] Connection id "0HMP9E50HQHH2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:31:01.071 +01:00 [DBG] Connection id "0HMP9E50HQHH3" accepted.
2023-03-20 19:31:01.073 +01:00 [DBG] Connection id "0HMP9E50HQHH3" started.
2023-03-20 19:31:01.134 +01:00 [DBG] Connection 0HMP9E50HQHH3 established using the following protocol: "Tls13"
2023-03-20 19:31:01.237 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:31:01.313 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:31:01.508 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:31:01.706 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:31:01.707 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:31:01.712 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.3393ms
2023-03-20 19:31:01.712 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 483.0596ms
2023-03-20 19:31:01.726 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:31:01.742 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.1866ms
2023-03-20 19:31:01.831 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:31:01.946 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.6187ms
2023-03-20 19:31:14.950 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:31:14.953 +01:00 [DBG] POST requests are not supported
2023-03-20 19:31:14.970 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:31:14.973 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:31:14.975 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:31:14.977 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:31:15.000 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:31:15.002 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:31:15.003 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:31:15.005 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:31:15.006 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:31:15.007 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:31:15.008 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:31:15.111 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:31:15.315 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:31:15.319 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:31:15.321 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:31:15.323 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:31:15.323 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:31:15.324 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:31:15.327 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:31:15.329 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:31:15.331 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:31:15.332 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:31:15.333 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:31:15.334 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:31:15.335 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:31:15.336 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:31:15.338 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:31:15.339 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:31:15.341 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:31:15.348 +01:00 [DBG] Connection id "0HMP9E50HQHH3", Request id "0HMP9E50HQHH3:00000009": started reading request body.
2023-03-20 19:31:15.349 +01:00 [DBG] Connection id "0HMP9E50HQHH3", Request id "0HMP9E50HQHH3:00000009": done reading request body.
2023-03-20 19:31:15.454 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:31:15.455 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:31:15.456 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:31:15.461 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:31:15.938 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:31:15.969 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:31:16.133 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:31:16.172 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:31:16.224 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (49ms).
2023-03-20 19:31:16.234 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:31:16.251 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:31:16.260 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:31:16.281 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:31:16.297 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:31:16.316 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:31:16.317 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:31:16.324 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:31:16.330 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:31:16.335 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:31:16.342 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:31:16.344 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:31:16.359 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:31:16.363 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:31:26.036 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:31:26.040 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 19:31:26.042 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 19:31:26.043 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 19:31:26.047 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 11036.8751ms
2023-03-20 19:31:26.048 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:31:26.052 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:31:26.055 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 406 0 - 11106.5771ms
2023-03-20 19:31:35.332 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:31:35.333 +01:00 [DBG] POST requests are not supported
2023-03-20 19:31:35.333 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:31:35.334 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:31:35.335 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:31:35.336 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:31:35.337 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:31:35.338 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:31:35.339 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:31:35.340 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:31:35.341 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:31:35.342 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:31:35.343 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:31:35.350 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:31:35.355 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:31:35.355 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:31:35.356 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:31:35.357 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:31:35.358 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:31:35.358 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:31:35.359 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:31:35.360 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:31:35.361 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:31:35.362 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:31:35.362 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:31:35.363 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:31:35.364 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:31:35.365 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:31:35.365 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:31:35.366 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:31:35.367 +01:00 [DBG] Connection id "0HMP9E50HQHH3", Request id "0HMP9E50HQHH3:0000000B": started reading request body.
2023-03-20 19:31:35.368 +01:00 [DBG] Connection id "0HMP9E50HQHH3", Request id "0HMP9E50HQHH3:0000000B": done reading request body.
2023-03-20 19:31:35.369 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:31:35.369 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:31:35.370 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:31:35.371 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:31:35.373 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:31:35.374 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:31:35.375 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-03-20 19:31:35.375 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:31:35.376 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:31:35.377 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:31:35.378 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:31:35.380 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:31:35.380 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:31:35.381 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:31:35.382 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:31:35.382 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:31:35.383 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:31:35.384 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:31:35.384 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:31:35.385 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:31:35.386 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:31:37.081 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1738.1094ms
2023-03-20 19:31:37.082 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:31:37.084 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:31:37.093 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:31:37.094 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 500 - text/plain;+charset=utf-8 1762.0547ms
2023-03-20 19:32:05.132 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:32:05.209 +01:00 [DBG] Hosting starting
2023-03-20 19:32:05.313 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:32:05.343 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:32:05.344 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:32:05.345 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:32:05.346 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:32:05.347 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:32:05.348 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:32:05.349 +01:00 [INF] Hosting environment: Development
2023-03-20 19:32:05.349 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:32:05.350 +01:00 [DBG] Hosting started
2023-03-20 19:32:05.477 +01:00 [DBG] Connection id "0HMP9E5JUSNK5" received FIN.
2023-03-20 19:32:05.477 +01:00 [DBG] Connection id "0HMP9E5JUSNK4" received FIN.
2023-03-20 19:32:05.488 +01:00 [DBG] Connection id "0HMP9E5JUSNK5" accepted.
2023-03-20 19:32:05.488 +01:00 [DBG] Connection id "0HMP9E5JUSNK4" accepted.
2023-03-20 19:32:05.490 +01:00 [DBG] Connection id "0HMP9E5JUSNK5" started.
2023-03-20 19:32:05.490 +01:00 [DBG] Connection id "0HMP9E5JUSNK4" started.
2023-03-20 19:32:05.510 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:32:05.510 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:32:05.540 +01:00 [DBG] Connection id "0HMP9E5JUSNK4" stopped.
2023-03-20 19:32:05.540 +01:00 [DBG] Connection id "0HMP9E5JUSNK5" stopped.
2023-03-20 19:32:05.545 +01:00 [DBG] Connection id "0HMP9E5JUSNK5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:32:05.545 +01:00 [DBG] Connection id "0HMP9E5JUSNK4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:32:05.940 +01:00 [DBG] Connection id "0HMP9E5JUSNK6" accepted.
2023-03-20 19:32:05.942 +01:00 [DBG] Connection id "0HMP9E5JUSNK6" started.
2023-03-20 19:32:05.977 +01:00 [DBG] Connection 0HMP9E5JUSNK6 established using the following protocol: "Tls13"
2023-03-20 19:32:06.035 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:32:06.068 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:32:06.169 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:32:06.305 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:32:06.309 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 279.3836ms
2023-03-20 19:32:06.318 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:32:06.323 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.4149ms
2023-03-20 19:32:06.325 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:32:06.342 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.7825ms
2023-03-20 19:32:06.407 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:32:06.508 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 101.6504ms
2023-03-20 19:32:25.352 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 79
2023-03-20 19:32:25.355 +01:00 [DBG] POST requests are not supported
2023-03-20 19:32:25.372 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:32:25.376 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:32:25.377 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:32:25.379 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:32:25.400 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:32:25.403 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:32:25.404 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:32:25.405 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:32:25.406 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:32:25.407 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:32:25.408 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:32:25.515 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:32:25.726 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:32:25.730 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:32:25.732 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:32:25.733 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:32:25.734 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:32:25.735 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:32:25.737 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:32:25.739 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:32:25.740 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:32:25.741 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:32:25.742 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:32:25.742 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:32:25.743 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:32:25.744 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:32:25.745 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:32:25.746 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:32:25.747 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:32:25.755 +01:00 [DBG] Connection id "0HMP9E5JUSNK6", Request id "0HMP9E5JUSNK6:00000009": started reading request body.
2023-03-20 19:32:25.756 +01:00 [DBG] Connection id "0HMP9E5JUSNK6", Request id "0HMP9E5JUSNK6:00000009": done reading request body.
2023-03-20 19:32:25.860 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:32:25.861 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:32:25.861 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:32:25.868 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:32:26.343 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:32:26.371 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:32:26.523 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:32:26.562 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:32:26.610 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-03-20 19:32:26.620 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:32:26.635 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:32:26.645 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:32:26.667 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:32:26.684 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:32:26.703 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:32:26.704 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:32:26.711 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:32:26.718 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:32:26.723 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:32:26.729 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:32:26.732 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:32:26.745 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:32:26.749 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:32:34.607 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:32:34.611 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 19:32:34.612 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 19:32:34.613 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 19:32:34.624 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 19:32:34.631 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 19:32:34.633 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 19:32:34.670 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 9260.0667ms
2023-03-20 19:32:34.672 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:32:34.676 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:32:34.680 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 79 - 201 70 application/json;+charset=utf-8 9328.5469ms
2023-03-20 19:33:34.625 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:33:34.700 +01:00 [DBG] Hosting starting
2023-03-20 19:33:34.794 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:33:34.823 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:33:34.823 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:33:34.824 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:33:34.825 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:33:34.826 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:33:34.827 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:33:34.828 +01:00 [INF] Hosting environment: Development
2023-03-20 19:33:34.829 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:33:34.830 +01:00 [DBG] Hosting started
2023-03-20 19:33:35.062 +01:00 [DBG] Connection id "0HMP9E6EL71AR" accepted.
2023-03-20 19:33:35.064 +01:00 [DBG] Connection id "0HMP9E6EL71AR" started.
2023-03-20 19:33:35.065 +01:00 [DBG] Connection id "0HMP9E6EL71AS" accepted.
2023-03-20 19:33:35.066 +01:00 [DBG] Connection id "0HMP9E6EL71AS" started.
2023-03-20 19:33:35.099 +01:00 [DBG] Connection id "0HMP9E6EL71AR" received FIN.
2023-03-20 19:33:35.099 +01:00 [DBG] Connection id "0HMP9E6EL71AS" received FIN.
2023-03-20 19:33:35.115 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:33:35.115 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:33:35.202 +01:00 [DBG] Connection id "0HMP9E6EL71AS" stopped.
2023-03-20 19:33:35.202 +01:00 [DBG] Connection id "0HMP9E6EL71AR" stopped.
2023-03-20 19:33:35.204 +01:00 [DBG] Connection id "0HMP9E6EL71AR" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:33:35.204 +01:00 [DBG] Connection id "0HMP9E6EL71AS" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:33:35.717 +01:00 [DBG] Connection id "0HMP9E6EL71AT" accepted.
2023-03-20 19:33:35.720 +01:00 [DBG] Connection id "0HMP9E6EL71AT" started.
2023-03-20 19:33:35.763 +01:00 [DBG] Connection 0HMP9E6EL71AT established using the following protocol: "Tls13"
2023-03-20 19:33:35.819 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:33:35.850 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:33:35.939 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:33:36.032 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:33:36.035 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:33:36.036 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 220.7260ms
2023-03-20 19:33:36.039 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.8287ms
2023-03-20 19:33:36.048 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:33:36.064 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.3511ms
2023-03-20 19:33:36.124 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:33:36.217 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.8485ms
2023-03-20 19:34:03.236 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:34:03.317 +01:00 [DBG] Hosting starting
2023-03-20 19:34:04.503 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:34:04.524 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:34:04.525 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:34:04.526 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:34:04.526 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:34:04.527 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:34:04.527 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:34:04.528 +01:00 [INF] Hosting environment: Development
2023-03-20 19:34:04.529 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:34:04.529 +01:00 [DBG] Hosting started
2023-03-20 19:34:04.772 +01:00 [DBG] Connection id "0HMP9E6NGINRM" received FIN.
2023-03-20 19:34:04.780 +01:00 [DBG] Connection id "0HMP9E6NGINRM" accepted.
2023-03-20 19:34:04.781 +01:00 [DBG] Connection id "0HMP9E6NGINRM" started.
2023-03-20 19:34:04.792 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:34:04.815 +01:00 [DBG] Connection id "0HMP9E6NGINRM" stopped.
2023-03-20 19:34:04.818 +01:00 [DBG] Connection id "0HMP9E6NGINRM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:34:05.142 +01:00 [DBG] Connection id "0HMP9E6NGINRN" accepted.
2023-03-20 19:34:05.143 +01:00 [DBG] Connection id "0HMP9E6NGINRN" started.
2023-03-20 19:34:05.173 +01:00 [DBG] Connection 0HMP9E6NGINRN established using the following protocol: "Tls13"
2023-03-20 19:34:05.221 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:34:05.247 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:34:05.323 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:34:05.416 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:34:05.420 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 202.1319ms
2023-03-20 19:34:05.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:34:05.433 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.3611ms
2023-03-20 19:34:05.436 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:34:05.452 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.7139ms
2023-03-20 19:34:05.521 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:34:05.616 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.8162ms
2023-03-20 19:34:22.255 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:34:22.258 +01:00 [DBG] POST requests are not supported
2023-03-20 19:34:22.276 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:34:22.280 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:34:22.281 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:34:22.284 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:34:22.307 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:34:22.309 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:34:22.310 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:34:22.311 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:34:22.312 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:34:22.313 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:34:22.314 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:34:22.416 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:34:22.605 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:34:22.609 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:34:22.611 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:34:22.612 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:34:22.613 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:34:22.614 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:34:22.615 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:34:22.618 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:34:22.619 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:34:22.620 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:34:22.620 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:34:22.621 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:34:22.622 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:34:22.623 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:34:22.624 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:34:22.625 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:34:22.626 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:34:22.633 +01:00 [DBG] Connection id "0HMP9E6NGINRN", Request id "0HMP9E6NGINRN:00000009": started reading request body.
2023-03-20 19:34:22.634 +01:00 [DBG] Connection id "0HMP9E6NGINRN", Request id "0HMP9E6NGINRN:00000009": done reading request body.
2023-03-20 19:34:22.735 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:34:22.736 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:34:22.737 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:34:22.743 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:34:23.213 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:34:23.242 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:34:23.403 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:34:23.441 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:34:23.491 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (46ms).
2023-03-20 19:34:23.500 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:34:23.515 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:34:23.527 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:34:23.555 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:34:23.573 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:34:23.593 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:34:23.595 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:34:23.602 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:34:23.609 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:34:23.615 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:34:23.622 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:34:23.625 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:34:23.638 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:34:23.643 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:34:30.260 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 7942.4251ms
2023-03-20 19:34:30.266 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:34:30.274 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:34:30.293 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:34:30.297 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 500 - text/plain;+charset=utf-8 8041.4573ms
2023-03-20 19:34:51.055 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:34:57.702 +01:00 [DBG] Hosting starting
2023-03-20 19:34:57.790 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:34:57.811 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:34:57.812 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:34:57.813 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:34:57.813 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:34:57.814 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:34:57.814 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:34:57.815 +01:00 [INF] Hosting environment: Development
2023-03-20 19:34:57.816 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:34:57.816 +01:00 [DBG] Hosting started
2023-03-20 19:34:58.145 +01:00 [DBG] Connection id "0HMP9E77DI12A" accepted.
2023-03-20 19:34:58.146 +01:00 [DBG] Connection id "0HMP9E77DI12A" started.
2023-03-20 19:34:58.152 +01:00 [DBG] Connection id "0HMP9E77DI12B" accepted.
2023-03-20 19:34:58.152 +01:00 [DBG] Connection id "0HMP9E77DI12B" started.
2023-03-20 19:34:58.188 +01:00 [DBG] Connection id "0HMP9E77DI12A" received FIN.
2023-03-20 19:34:58.188 +01:00 [DBG] Connection id "0HMP9E77DI12B" received FIN.
2023-03-20 19:34:58.201 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:34:58.201 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:34:58.224 +01:00 [DBG] Connection id "0HMP9E77DI12B" stopped.
2023-03-20 19:34:58.224 +01:00 [DBG] Connection id "0HMP9E77DI12A" stopped.
2023-03-20 19:34:58.226 +01:00 [DBG] Connection id "0HMP9E77DI12B" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:34:58.226 +01:00 [DBG] Connection id "0HMP9E77DI12A" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:34:58.593 +01:00 [DBG] Connection id "0HMP9E77DI12C" accepted.
2023-03-20 19:34:58.594 +01:00 [DBG] Connection id "0HMP9E77DI12C" started.
2023-03-20 19:34:58.629 +01:00 [DBG] Connection 0HMP9E77DI12C established using the following protocol: "Tls13"
2023-03-20 19:34:58.678 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:34:58.710 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:34:58.788 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:34:58.882 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:34:58.883 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:34:58.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.4528ms
2023-03-20 19:34:58.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 212.8006ms
2023-03-20 19:34:58.896 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:34:58.913 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.2298ms
2023-03-20 19:34:58.991 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:34:59.085 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.5228ms
2023-03-20 19:35:17.169 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:35:17.171 +01:00 [DBG] POST requests are not supported
2023-03-20 19:35:17.189 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:35:17.192 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:35:17.193 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:35:17.195 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:35:17.217 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:35:17.218 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:35:17.219 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:35:17.220 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:35:17.221 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:35:17.222 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:35:17.223 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:35:17.331 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:35:17.524 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:35:17.528 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:35:17.529 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:35:17.531 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:35:17.532 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:35:17.532 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:35:17.534 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:35:17.536 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:35:17.537 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:35:17.538 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:35:17.539 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:35:17.540 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:35:17.540 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:35:17.541 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:35:17.542 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:35:17.544 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:35:17.545 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:35:17.551 +01:00 [DBG] Connection id "0HMP9E77DI12C", Request id "0HMP9E77DI12C:00000009": started reading request body.
2023-03-20 19:35:17.553 +01:00 [DBG] Connection id "0HMP9E77DI12C", Request id "0HMP9E77DI12C:00000009": done reading request body.
2023-03-20 19:35:17.656 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:35:17.657 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:35:17.658 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:35:17.663 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:35:18.139 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:35:18.166 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:35:18.321 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:35:18.358 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:35:18.409 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (47ms).
2023-03-20 19:35:18.419 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:35:18.432 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:35:18.442 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:35:18.463 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:35:18.479 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:35:18.498 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:35:18.499 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:35:18.505 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:35:18.511 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:35:18.516 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:35:18.523 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:35:18.525 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:35:18.538 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:35:18.543 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:35:23.522 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 6295.542ms
2023-03-20 19:35:23.528 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:35:23.536 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:35:23.554 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:35:23.558 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 500 - text/plain;+charset=utf-8 6388.9008ms
2023-03-20 19:36:57.696 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82
2023-03-20 19:36:57.699 +01:00 [DBG] POST requests are not supported
2023-03-20 19:36:57.700 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:36:57.700 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:36:57.701 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:36:57.702 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:36:57.703 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:36:57.704 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:36:57.705 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:36:57.706 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:36:57.707 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:36:57.708 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:36:57.709 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:36:57.717 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:36:57.724 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:36:57.725 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:36:57.726 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:36:57.726 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:36:57.727 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:36:57.728 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:36:57.729 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:36:57.729 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:36:57.730 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:36:57.731 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:36:57.732 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:36:57.733 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:36:57.733 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:36:57.734 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:36:57.735 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:36:57.736 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:36:57.736 +01:00 [DBG] Connection id "0HMP9E77DI12C", Request id "0HMP9E77DI12C:0000000B": started reading request body.
2023-03-20 19:36:57.737 +01:00 [DBG] Connection id "0HMP9E77DI12C", Request id "0HMP9E77DI12C:0000000B": done reading request body.
2023-03-20 19:36:57.738 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:36:57.738 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:36:57.739 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:36:57.740 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:36:57.742 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:36:57.747 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:36:57.748 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-03-20 19:36:57.749 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:36:57.750 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:36:57.751 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:36:57.753 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:36:57.754 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:36:57.755 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:36:57.756 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:36:57.757 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:36:57.758 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:36:57.758 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:36:57.759 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:36:57.760 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:36:57.761 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:36:57.762 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:36:59.616 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1907.7101ms
2023-03-20 19:36:59.617 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:36:59.619 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:36:59.623 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:36:59.624 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 82 - 500 - text/plain;+charset=utf-8 1928.4400ms
2023-03-20 19:37:17.539 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:37:54.595 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:37:54.679 +01:00 [DBG] Hosting starting
2023-03-20 19:37:54.794 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:37:54.824 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:37:54.825 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:37:54.825 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:37:54.826 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:37:54.827 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:37:54.828 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:37:54.829 +01:00 [INF] Hosting environment: Development
2023-03-20 19:37:54.830 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:37:54.831 +01:00 [DBG] Hosting started
2023-03-20 19:37:54.990 +01:00 [DBG] Connection id "0HMP9E8S42CPC" accepted.
2023-03-20 19:37:54.990 +01:00 [DBG] Connection id "0HMP9E8S42CPB" accepted.
2023-03-20 19:37:54.995 +01:00 [DBG] Connection id "0HMP9E8S42CPB" started.
2023-03-20 19:37:54.995 +01:00 [DBG] Connection id "0HMP9E8S42CPC" started.
2023-03-20 19:37:55.015 +01:00 [DBG] Connection id "0HMP9E8S42CPC" received FIN.
2023-03-20 19:37:55.015 +01:00 [DBG] Connection id "0HMP9E8S42CPB" received FIN.
2023-03-20 19:37:55.023 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:37:55.023 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:37:55.064 +01:00 [DBG] Connection id "0HMP9E8S42CPB" stopped.
2023-03-20 19:37:55.064 +01:00 [DBG] Connection id "0HMP9E8S42CPC" stopped.
2023-03-20 19:37:55.067 +01:00 [DBG] Connection id "0HMP9E8S42CPC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:37:55.067 +01:00 [DBG] Connection id "0HMP9E8S42CPB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:37:55.525 +01:00 [DBG] Connection id "0HMP9E8S42CPD" accepted.
2023-03-20 19:37:55.526 +01:00 [DBG] Connection id "0HMP9E8S42CPD" started.
2023-03-20 19:37:55.575 +01:00 [DBG] Connection 0HMP9E8S42CPD established using the following protocol: "Tls13"
2023-03-20 19:37:55.656 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:37:55.703 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:37:55.817 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:37:55.926 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:37:55.930 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 277.8450ms
2023-03-20 19:37:55.932 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:37:55.936 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.3555ms
2023-03-20 19:37:55.946 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:37:55.964 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.5007ms
2023-03-20 19:37:56.042 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:37:56.144 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 102.6137ms
2023-03-20 19:38:33.214 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:38:33.304 +01:00 [DBG] Hosting starting
2023-03-20 19:38:33.415 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:38:33.444 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:38:33.444 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:38:33.445 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:38:33.446 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:38:33.446 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:38:33.448 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:38:33.448 +01:00 [INF] Hosting environment: Development
2023-03-20 19:38:33.449 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:38:33.450 +01:00 [DBG] Hosting started
2023-03-20 19:38:33.611 +01:00 [DBG] Connection id "0HMP9E97KD2P3" accepted.
2023-03-20 19:38:33.611 +01:00 [DBG] Connection id "0HMP9E97KD2P2" accepted.
2023-03-20 19:38:33.613 +01:00 [DBG] Connection id "0HMP9E97KD2P3" started.
2023-03-20 19:38:33.613 +01:00 [DBG] Connection id "0HMP9E97KD2P2" started.
2023-03-20 19:38:33.641 +01:00 [DBG] Connection id "0HMP9E97KD2P3" received FIN.
2023-03-20 19:38:33.641 +01:00 [DBG] Connection id "0HMP9E97KD2P2" received FIN.
2023-03-20 19:38:33.658 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:38:33.658 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:38:33.698 +01:00 [DBG] Connection id "0HMP9E97KD2P3" stopped.
2023-03-20 19:38:33.698 +01:00 [DBG] Connection id "0HMP9E97KD2P2" stopped.
2023-03-20 19:38:33.702 +01:00 [DBG] Connection id "0HMP9E97KD2P2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:38:33.702 +01:00 [DBG] Connection id "0HMP9E97KD2P3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:38:34.138 +01:00 [DBG] Connection id "0HMP9E97KD2P4" accepted.
2023-03-20 19:38:34.140 +01:00 [DBG] Connection id "0HMP9E97KD2P4" started.
2023-03-20 19:38:34.176 +01:00 [DBG] Connection 0HMP9E97KD2P4 established using the following protocol: "Tls13"
2023-03-20 19:38:34.234 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:38:34.270 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:38:34.386 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:38:34.502 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:38:34.504 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:38:34.508 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.2490ms
2023-03-20 19:38:34.508 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 278.6969ms
2023-03-20 19:38:34.518 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:38:34.537 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.2384ms
2023-03-20 19:38:34.602 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:38:34.699 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 97.2255ms
2023-03-20 19:38:54.404 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80
2023-03-20 19:38:54.407 +01:00 [DBG] POST requests are not supported
2023-03-20 19:38:54.424 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:38:54.428 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:38:54.429 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:38:54.431 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:38:54.454 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:38:54.456 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:38:54.457 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:38:54.458 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:38:54.459 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:38:54.460 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:38:54.461 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:38:54.565 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:38:54.780 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:38:54.783 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:38:54.785 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:38:54.786 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:38:54.787 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:38:54.788 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:38:54.790 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:38:54.792 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:38:54.792 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:38:54.794 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:38:54.795 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:38:54.795 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:38:54.796 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:38:54.797 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:38:54.798 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:38:54.800 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:38:54.801 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:38:54.807 +01:00 [DBG] Connection id "0HMP9E97KD2P4", Request id "0HMP9E97KD2P4:00000009": started reading request body.
2023-03-20 19:38:54.808 +01:00 [DBG] Connection id "0HMP9E97KD2P4", Request id "0HMP9E97KD2P4:00000009": done reading request body.
2023-03-20 19:38:54.910 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:38:54.911 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:38:54.912 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:38:54.917 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:38:55.406 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:38:55.435 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:38:55.587 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:38:55.628 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:38:55.674 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (44ms).
2023-03-20 19:38:55.684 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:38:55.698 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:38:55.707 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:38:55.730 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:38:55.745 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:38:55.764 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:38:55.765 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:38:55.772 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:38:55.778 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:38:55.783 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:38:55.790 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:38:55.793 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:38:55.805 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:38:55.810 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:38:57.406 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 2941.195ms
2023-03-20 19:38:57.409 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:38:57.411 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:38:57.435 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:38:57.439 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 80 - 500 - text/plain;+charset=utf-8 3034.9273ms
2023-03-20 19:39:55.099 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:39:55.186 +01:00 [DBG] Hosting starting
2023-03-20 19:39:55.298 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:39:55.324 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:39:55.325 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:39:55.326 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:39:55.326 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:39:55.327 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:39:55.328 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:39:55.329 +01:00 [INF] Hosting environment: Development
2023-03-20 19:39:55.330 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:39:55.331 +01:00 [DBG] Hosting started
2023-03-20 19:39:55.485 +01:00 [DBG] Connection id "0HMP9EA016PGN" accepted.
2023-03-20 19:39:55.486 +01:00 [DBG] Connection id "0HMP9EA016PGN" started.
2023-03-20 19:39:55.503 +01:00 [DBG] Connection id "0HMP9EA016PGO" accepted.
2023-03-20 19:39:55.504 +01:00 [DBG] Connection id "0HMP9EA016PGO" started.
2023-03-20 19:39:55.521 +01:00 [DBG] Connection id "0HMP9EA016PGO" received FIN.
2023-03-20 19:39:55.521 +01:00 [DBG] Connection id "0HMP9EA016PGN" received FIN.
2023-03-20 19:39:55.541 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:39:55.541 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:39:55.572 +01:00 [DBG] Connection id "0HMP9EA016PGO" stopped.
2023-03-20 19:39:55.572 +01:00 [DBG] Connection id "0HMP9EA016PGN" stopped.
2023-03-20 19:39:55.574 +01:00 [DBG] Connection id "0HMP9EA016PGO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:39:55.574 +01:00 [DBG] Connection id "0HMP9EA016PGN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:39:56.000 +01:00 [DBG] Connection id "0HMP9EA016PGP" accepted.
2023-03-20 19:39:56.000 +01:00 [DBG] Connection id "0HMP9EA016PGP" started.
2023-03-20 19:39:56.038 +01:00 [DBG] Connection 0HMP9EA016PGP established using the following protocol: "Tls13"
2023-03-20 19:39:56.100 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:39:56.136 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:39:56.233 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:39:56.335 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:39:56.339 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 243.5455ms
2023-03-20 19:39:56.345 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:39:56.349 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.9944ms
2023-03-20 19:39:56.353 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:39:56.368 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.6945ms
2023-03-20 19:39:56.431 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:39:56.526 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.7060ms
2023-03-20 19:40:13.103 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:40:13.105 +01:00 [DBG] POST requests are not supported
2023-03-20 19:40:13.123 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:40:13.126 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:40:13.128 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:40:13.130 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:40:13.153 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:40:13.155 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:40:13.156 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:40:13.157 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:40:13.158 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:40:13.159 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:40:13.160 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:40:13.267 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:40:13.461 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:40:13.465 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:40:13.467 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:40:13.468 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:40:13.469 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:40:13.470 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:40:13.471 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:40:13.473 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:40:13.474 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:40:13.475 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:40:13.476 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:40:13.476 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:40:13.477 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:40:13.478 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:40:13.479 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:40:13.481 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:40:13.482 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:40:13.489 +01:00 [DBG] Connection id "0HMP9EA016PGP", Request id "0HMP9EA016PGP:00000009": started reading request body.
2023-03-20 19:40:13.490 +01:00 [DBG] Connection id "0HMP9EA016PGP", Request id "0HMP9EA016PGP:00000009": done reading request body.
2023-03-20 19:40:13.596 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:40:13.598 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:40:13.599 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:40:13.606 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:40:14.090 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:40:14.117 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:40:14.270 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:40:14.307 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:40:14.362 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (51ms).
2023-03-20 19:40:14.371 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:40:14.387 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:40:14.397 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:40:14.421 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:40:14.437 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:40:14.456 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:40:14.457 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:40:14.463 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:40:14.470 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:40:14.475 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:40:14.482 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:40:14.484 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:40:14.497 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:40:14.501 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:40:17.115 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:40:17.119 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 19:40:17.120 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 19:40:17.121 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 19:40:17.126 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 3962.7092ms
2023-03-20 19:40:17.127 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:40:17.131 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:40:17.134 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 406 0 - 4031.3795ms
2023-03-20 19:40:22.056 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:40:22.057 +01:00 [DBG] POST requests are not supported
2023-03-20 19:40:22.057 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:40:22.058 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:40:22.059 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:40:22.060 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:40:22.061 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:40:22.062 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:40:22.063 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:40:22.064 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:40:22.065 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:40:22.066 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:40:22.066 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:40:22.074 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:40:22.081 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:40:22.082 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:40:22.083 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:40:22.084 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:40:22.085 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:40:22.085 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:40:22.086 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:40:22.087 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:40:22.088 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:40:22.089 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:40:22.089 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:40:22.090 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:40:22.091 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:40:22.092 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:40:22.093 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:40:22.093 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:40:22.094 +01:00 [DBG] Connection id "0HMP9EA016PGP", Request id "0HMP9EA016PGP:0000000B": started reading request body.
2023-03-20 19:40:22.095 +01:00 [DBG] Connection id "0HMP9EA016PGP", Request id "0HMP9EA016PGP:0000000B": done reading request body.
2023-03-20 19:40:22.096 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:40:22.096 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:40:22.097 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:40:22.098 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:40:22.100 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:40:22.101 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:40:22.105 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-03-20 19:40:22.106 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:40:22.106 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:40:22.107 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:40:22.108 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:40:22.109 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:40:22.110 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:40:22.111 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:40:22.112 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:40:22.112 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:40:22.113 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:40:22.113 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:40:22.114 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:40:22.115 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:40:22.115 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:40:23.434 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:40:23.436 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 19:40:23.437 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 19:40:23.438 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 19:40:23.449 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 19:40:23.456 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 19:40:23.457 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 19:40:23.492 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1425.191ms
2023-03-20 19:40:23.493 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:40:23.493 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:40:23.494 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 1438.8021ms
2023-03-20 19:42:13.471 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:42:23.489 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:42:23.492 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.049ms - processed: 0 items - remaining: 1 items
2023-03-20 19:42:57.271 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:42:57.355 +01:00 [DBG] Hosting starting
2023-03-20 19:43:15.542 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:43:15.566 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:43:15.567 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:43:15.567 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:43:15.568 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:43:15.569 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:43:15.570 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:43:15.571 +01:00 [INF] Hosting environment: Development
2023-03-20 19:43:15.572 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:43:15.572 +01:00 [DBG] Hosting started
2023-03-20 19:43:15.701 +01:00 [DBG] Connection id "0HMP9EBRMKBFN" accepted.
2023-03-20 19:43:15.703 +01:00 [DBG] Connection id "0HMP9EBRMKBFN" started.
2023-03-20 19:43:15.708 +01:00 [DBG] Connection id "0HMP9EBRMKBFO" received FIN.
2023-03-20 19:43:15.710 +01:00 [DBG] Connection id "0HMP9EBRMKBFN" received FIN.
2023-03-20 19:43:15.710 +01:00 [DBG] Connection id "0HMP9EBRMKBFO" accepted.
2023-03-20 19:43:15.711 +01:00 [DBG] Connection id "0HMP9EBRMKBFO" started.
2023-03-20 19:43:15.716 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:43:15.716 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:43:15.739 +01:00 [DBG] Connection id "0HMP9EBRMKBFN" stopped.
2023-03-20 19:43:15.739 +01:00 [DBG] Connection id "0HMP9EBRMKBFO" stopped.
2023-03-20 19:43:15.744 +01:00 [DBG] Connection id "0HMP9EBRMKBFN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:43:15.744 +01:00 [DBG] Connection id "0HMP9EBRMKBFO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:43:16.127 +01:00 [DBG] Connection id "0HMP9EBRMKBFP" accepted.
2023-03-20 19:43:16.130 +01:00 [DBG] Connection id "0HMP9EBRMKBFP" started.
2023-03-20 19:43:16.169 +01:00 [DBG] Connection 0HMP9EBRMKBFP established using the following protocol: "Tls13"
2023-03-20 19:43:16.238 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:43:16.272 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:43:16.359 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:43:16.455 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:43:16.460 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:43:16.462 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 229.1973ms
2023-03-20 19:43:16.465 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.1658ms
2023-03-20 19:43:16.475 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:43:16.498 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.2735ms
2023-03-20 19:43:16.581 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:43:16.691 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 109.9700ms
2023-03-20 19:43:31.870 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:43:31.872 +01:00 [DBG] POST requests are not supported
2023-03-20 19:43:31.890 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:43:31.894 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:43:31.895 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:43:31.898 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:43:31.919 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:43:31.921 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:43:31.922 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:43:31.922 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:43:31.924 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:43:31.925 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:43:31.926 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:43:32.029 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:43:32.219 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:43:32.223 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:43:32.225 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:43:32.226 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:43:32.227 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:43:32.228 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:43:32.229 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:43:32.231 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:43:32.232 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:43:32.233 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:43:32.234 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:43:32.234 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:43:32.235 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:43:32.236 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:43:32.237 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:43:32.238 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:43:32.239 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:43:32.246 +01:00 [DBG] Connection id "0HMP9EBRMKBFP", Request id "0HMP9EBRMKBFP:00000009": started reading request body.
2023-03-20 19:43:32.247 +01:00 [DBG] Connection id "0HMP9EBRMKBFP", Request id "0HMP9EBRMKBFP:00000009": done reading request body.
2023-03-20 19:43:32.357 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:43:32.358 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:43:32.359 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:43:32.366 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:43:32.843 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:43:32.870 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:43:33.022 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:43:33.059 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:43:33.106 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (44ms).
2023-03-20 19:43:33.116 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:43:33.130 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:43:33.139 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:43:33.161 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:43:33.177 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:43:33.197 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:43:33.198 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:43:33.204 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:43:33.211 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:43:33.216 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:43:33.222 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:43:33.225 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:43:33.237 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:43:33.242 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:43:38.995 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:43:38.999 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 19:43:39.000 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 19:43:39.002 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 19:43:39.006 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 7077.0511ms
2023-03-20 19:43:39.007 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:43:39.011 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:43:39.014 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 406 0 - 7144.4378ms
2023-03-20 19:45:32.226 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:45:42.238 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:45:42.242 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0465ms - processed: 0 items - remaining: 1 items
2023-03-20 19:45:52.257 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:45:52.259 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2023-03-20 19:46:04.138 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:46:04.213 +01:00 [DBG] Hosting starting
2023-03-20 19:47:12.084 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:47:12.122 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:47:12.123 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:47:12.124 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:47:12.124 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:47:12.125 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:47:12.126 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:47:12.127 +01:00 [INF] Hosting environment: Development
2023-03-20 19:47:12.128 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:47:12.129 +01:00 [DBG] Hosting started
2023-03-20 19:47:12.567 +01:00 [DBG] Connection id "0HMP9EE29HSMT" accepted.
2023-03-20 19:47:12.568 +01:00 [DBG] Connection id "0HMP9EE29HSMT" started.
2023-03-20 19:47:12.575 +01:00 [DBG] Connection id "0HMP9EE29HSMU" accepted.
2023-03-20 19:47:12.576 +01:00 [DBG] Connection id "0HMP9EE29HSMU" started.
2023-03-20 19:47:12.607 +01:00 [DBG] Connection id "0HMP9EE29HSMU" received FIN.
2023-03-20 19:47:12.607 +01:00 [DBG] Connection id "0HMP9EE29HSMT" received FIN.
2023-03-20 19:47:12.616 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:47:12.616 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:47:12.640 +01:00 [DBG] Connection id "0HMP9EE29HSMT" stopped.
2023-03-20 19:47:12.640 +01:00 [DBG] Connection id "0HMP9EE29HSMU" stopped.
2023-03-20 19:47:12.642 +01:00 [DBG] Connection id "0HMP9EE29HSMT" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:47:12.642 +01:00 [DBG] Connection id "0HMP9EE29HSMU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:47:12.968 +01:00 [DBG] Connection id "0HMP9EE29HSMV" accepted.
2023-03-20 19:47:12.969 +01:00 [DBG] Connection id "0HMP9EE29HSMV" started.
2023-03-20 19:47:12.999 +01:00 [DBG] Connection 0HMP9EE29HSMV established using the following protocol: "Tls13"
2023-03-20 19:47:13.042 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:47:13.070 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:47:13.158 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:47:13.253 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:47:13.253 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:47:13.256 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 217.6682ms
2023-03-20 19:47:13.257 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.9018ms
2023-03-20 19:47:13.265 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:47:13.280 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.5469ms
2023-03-20 19:47:13.346 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:47:13.436 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.8990ms
2023-03-20 19:47:27.529 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 89
2023-03-20 19:47:27.532 +01:00 [DBG] POST requests are not supported
2023-03-20 19:47:27.548 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:47:27.551 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:47:27.553 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:47:27.555 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:47:27.578 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:47:27.579 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:47:27.580 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:47:27.582 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:47:27.583 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:47:27.584 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:47:27.585 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:47:27.686 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:47:27.876 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:47:27.880 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:47:27.881 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:47:27.883 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:47:27.883 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:47:27.884 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:47:27.886 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:47:27.888 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:47:27.889 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:47:27.890 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:47:27.891 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:47:27.892 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:47:27.892 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:47:27.893 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:47:27.895 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:47:27.896 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:47:27.897 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:47:27.903 +01:00 [DBG] Connection id "0HMP9EE29HSMV", Request id "0HMP9EE29HSMV:00000009": started reading request body.
2023-03-20 19:47:27.905 +01:00 [DBG] Connection id "0HMP9EE29HSMV", Request id "0HMP9EE29HSMV:00000009": done reading request body.
2023-03-20 19:47:28.003 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:47:28.004 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:47:28.005 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:47:28.010 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:47:28.480 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:47:28.507 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:47:28.666 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:47:28.705 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:47:28.754 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-03-20 19:47:28.763 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:47:28.777 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:47:28.786 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:47:28.808 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:47:28.825 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:47:28.844 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:47:28.845 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:47:28.851 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:47:28.858 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:47:28.863 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:47:28.869 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:47:28.872 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:47:28.884 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:47:28.888 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:48:25.148 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:48:25.152 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 19:48:25.154 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 19:48:25.155 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 19:48:25.159 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 57570.813ms
2023-03-20 19:48:25.160 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:48:25.164 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:48:25.168 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 89 - 406 0 - 57638.4650ms
2023-03-20 19:49:27.895 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:49:37.911 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:49:37.916 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0718ms - processed: 0 items - remaining: 1 items
2023-03-20 19:49:47.927 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:49:47.928 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2023-03-20 19:49:57.944 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:49:57.945 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 19:50:07.952 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:50:07.953 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2023-03-20 19:50:17.971 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:50:17.972 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2023-03-20 19:50:27.979 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:50:27.981 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 19:50:37.994 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:50:37.994 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 19:50:48.008 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:50:48.009 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 19:50:58.014 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:50:58.015 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 19:51:08.040 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:51:08.041 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 19:51:18.054 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:51:18.055 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 19:51:28.058 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:51:28.059 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 19:51:38.067 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:51:38.068 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 19:51:48.084 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:51:48.085 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 19:51:58.088 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:51:58.092 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 19:52:08.102 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:52:08.103 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 19:52:18.110 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:52:18.111 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 19:52:28.115 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:52:28.116 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 19:52:45.261 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:52:45.348 +01:00 [DBG] Hosting starting
2023-03-20 19:53:00.055 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:53:00.082 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:53:00.082 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:53:00.083 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:53:00.084 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:53:00.084 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:53:00.085 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:53:00.086 +01:00 [INF] Hosting environment: Development
2023-03-20 19:53:00.086 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:53:00.087 +01:00 [DBG] Hosting started
2023-03-20 19:53:00.196 +01:00 [DBG] Connection id "0HMP9EH9SPVVA" accepted.
2023-03-20 19:53:00.198 +01:00 [DBG] Connection id "0HMP9EH9SPVVA" started.
2023-03-20 19:53:00.237 +01:00 [DBG] Connection id "0HMP9EH9SPVVA" received FIN.
2023-03-20 19:53:00.245 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:53:00.273 +01:00 [DBG] Connection id "0HMP9EH9SPVVA" stopped.
2023-03-20 19:53:00.275 +01:00 [DBG] Connection id "0HMP9EH9SPVVA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:53:00.628 +01:00 [DBG] Connection id "0HMP9EH9SPVVB" accepted.
2023-03-20 19:53:00.629 +01:00 [DBG] Connection id "0HMP9EH9SPVVB" started.
2023-03-20 19:53:00.660 +01:00 [DBG] Connection 0HMP9EH9SPVVB established using the following protocol: "Tls13"
2023-03-20 19:53:00.708 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:53:00.739 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:53:00.817 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:53:00.908 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:53:00.911 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 206.3198ms
2023-03-20 19:53:00.918 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:53:00.922 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.1687ms
2023-03-20 19:53:00.928 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:53:00.943 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.0210ms
2023-03-20 19:53:01.007 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:53:01.099 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.2268ms
2023-03-20 19:53:38.869 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:53:38.871 +01:00 [DBG] POST requests are not supported
2023-03-20 19:53:38.889 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:53:38.892 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:53:38.893 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:53:38.896 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:53:38.917 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:53:38.919 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:53:38.920 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:53:38.921 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:53:38.922 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:53:38.923 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:53:38.924 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:53:39.025 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:53:39.212 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:53:39.225 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:53:39.227 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:53:39.228 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:53:39.229 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:53:39.230 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:53:39.232 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:53:39.234 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:53:39.235 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:53:39.236 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:53:39.237 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:53:39.237 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:53:39.238 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:53:39.239 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:53:39.240 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:53:39.242 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:53:39.243 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:53:39.249 +01:00 [DBG] Connection id "0HMP9EH9SPVVB", Request id "0HMP9EH9SPVVB:00000009": started reading request body.
2023-03-20 19:53:39.250 +01:00 [DBG] Connection id "0HMP9EH9SPVVB", Request id "0HMP9EH9SPVVB:00000009": done reading request body.
2023-03-20 19:53:39.350 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:53:39.351 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:53:39.351 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:53:39.356 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:53:39.820 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:53:39.847 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:53:39.995 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:53:40.034 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:53:40.082 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-03-20 19:53:40.091 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:53:40.105 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:53:40.115 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:53:40.134 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:53:40.149 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:53:40.167 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:53:40.168 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:53:40.174 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:53:40.181 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:53:40.186 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:53:40.192 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:53:40.195 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:53:40.207 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:53:40.211 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:53:41.939 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 3011.191ms
2023-03-20 19:53:41.941 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:53:41.942 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=406, text='PRECONDITION_FAILED - inequivalent arg 'auto_delete' for queue 'ticketSold' in vhost '/': received 'false' but current is 'true'', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 19:53:41.960 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:53:41.964 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 500 - text/plain;+charset=utf-8 3095.0257ms
2023-03-20 19:55:17.779 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:55:21.866 +01:00 [DBG] Hosting starting
2023-03-20 19:55:21.958 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:55:21.981 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:55:21.982 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:55:21.982 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:55:21.983 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:55:21.983 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:55:21.984 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:55:21.984 +01:00 [INF] Hosting environment: Development
2023-03-20 19:55:21.985 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:55:21.986 +01:00 [DBG] Hosting started
2023-03-20 19:55:22.069 +01:00 [DBG] Connection id "0HMP9EIK5PU07" accepted.
2023-03-20 19:55:22.071 +01:00 [DBG] Connection id "0HMP9EIK5PU07" started.
2023-03-20 19:55:22.089 +01:00 [DBG] Connection id "0HMP9EIK5PU07" received FIN.
2023-03-20 19:55:22.098 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:55:22.129 +01:00 [DBG] Connection id "0HMP9EIK5PU07" stopped.
2023-03-20 19:55:22.131 +01:00 [DBG] Connection id "0HMP9EIK5PU07" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:55:22.515 +01:00 [DBG] Connection id "0HMP9EIK5PU08" accepted.
2023-03-20 19:55:22.516 +01:00 [DBG] Connection id "0HMP9EIK5PU08" started.
2023-03-20 19:55:22.558 +01:00 [DBG] Connection 0HMP9EIK5PU08 established using the following protocol: "Tls13"
2023-03-20 19:55:22.621 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:55:22.656 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:55:22.746 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:55:22.843 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:55:22.848 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 231.4652ms
2023-03-20 19:55:22.851 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:55:22.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 6.9722ms
2023-03-20 19:55:22.871 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:55:22.891 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.4900ms
2023-03-20 19:55:22.982 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:55:23.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 105.2860ms
2023-03-20 19:55:37.554 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:55:37.556 +01:00 [DBG] POST requests are not supported
2023-03-20 19:55:37.574 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:55:37.578 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:55:37.579 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:55:37.582 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:55:37.603 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:55:37.605 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:55:37.606 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:55:37.607 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:55:37.608 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:55:37.609 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:55:37.610 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:55:37.714 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:55:37.927 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:55:37.931 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:55:37.934 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:55:37.936 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:55:37.936 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:55:37.937 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:55:37.940 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:55:37.942 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:55:37.943 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:55:37.944 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:55:37.945 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:55:37.946 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:55:37.946 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:55:37.947 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:55:37.949 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:55:37.950 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:55:37.951 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:55:37.958 +01:00 [DBG] Connection id "0HMP9EIK5PU08", Request id "0HMP9EIK5PU08:00000009": started reading request body.
2023-03-20 19:55:37.959 +01:00 [DBG] Connection id "0HMP9EIK5PU08", Request id "0HMP9EIK5PU08:00000009": done reading request body.
2023-03-20 19:55:38.061 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:55:38.062 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:55:38.063 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:55:38.068 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:55:38.555 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:55:38.585 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:55:38.736 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:55:38.775 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:55:38.820 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (42ms).
2023-03-20 19:55:38.830 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:55:38.844 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:55:38.853 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:55:38.875 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:55:38.890 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:55:38.909 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:55:38.910 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:55:38.916 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:55:38.923 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:55:38.928 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:55:38.935 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:55:38.937 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:55:38.949 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:55:38.954 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:55:43.533 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:55:43.537 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 19:55:43.538 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 19:55:43.540 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 19:55:43.544 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 5930.6635ms
2023-03-20 19:55:43.546 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:55:43.550 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:55:43.553 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 406 0 - 5999.5922ms
2023-03-20 19:55:52.566 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:55:52.567 +01:00 [DBG] POST requests are not supported
2023-03-20 19:55:52.567 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:55:52.568 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:55:52.569 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:55:52.570 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:55:52.571 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:55:52.572 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:55:52.573 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:55:52.574 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:55:52.575 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:55:52.576 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:55:52.577 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:55:52.585 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:55:52.592 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:55:52.594 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:55:52.595 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:55:52.596 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:55:52.597 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:55:52.597 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:55:52.598 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:55:52.599 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:55:52.600 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:55:52.600 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:55:52.601 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:55:52.602 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:55:52.602 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:55:52.603 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:55:52.604 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:55:52.605 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:55:52.606 +01:00 [DBG] Connection id "0HMP9EIK5PU08", Request id "0HMP9EIK5PU08:0000000B": started reading request body.
2023-03-20 19:55:52.607 +01:00 [DBG] Connection id "0HMP9EIK5PU08", Request id "0HMP9EIK5PU08:0000000B": done reading request body.
2023-03-20 19:55:52.608 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:55:52.608 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:55:52.609 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:55:52.610 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:55:52.612 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:55:52.613 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:55:52.617 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-03-20 19:55:52.617 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:55:52.618 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:55:52.619 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:55:52.620 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:55:52.622 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:55:52.622 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:55:52.623 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:55:52.624 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:55:52.625 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:55:52.625 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:55:52.626 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:55:52.627 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:55:52.628 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:55:52.628 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:55:54.100 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:55:54.101 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 19:55:54.102 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 19:55:54.103 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 19:55:54.115 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 19:55:54.122 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 19:55:54.123 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 19:55:54.157 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1579.7767ms
2023-03-20 19:55:54.159 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:55:54.162 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:55:54.162 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 1596.3114ms
2023-03-20 19:57:05.929 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 19:57:06.010 +01:00 [DBG] Hosting starting
2023-03-20 19:57:07.824 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 19:57:07.846 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 19:57:07.847 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 19:57:07.847 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 19:57:07.848 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 19:57:07.849 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 19:57:07.849 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 19:57:07.850 +01:00 [INF] Hosting environment: Development
2023-03-20 19:57:07.851 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 19:57:07.852 +01:00 [DBG] Hosting started
2023-03-20 19:57:07.932 +01:00 [DBG] Connection id "0HMP9EJJNDIUK" received FIN.
2023-03-20 19:57:07.939 +01:00 [DBG] Connection id "0HMP9EJJNDIUK" accepted.
2023-03-20 19:57:07.941 +01:00 [DBG] Connection id "0HMP9EJJNDIUK" started.
2023-03-20 19:57:07.953 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 19:57:07.977 +01:00 [DBG] Connection id "0HMP9EJJNDIUK" stopped.
2023-03-20 19:57:07.980 +01:00 [DBG] Connection id "0HMP9EJJNDIUK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 19:57:08.287 +01:00 [DBG] Connection id "0HMP9EJJNDIUL" accepted.
2023-03-20 19:57:08.288 +01:00 [DBG] Connection id "0HMP9EJJNDIUL" started.
2023-03-20 19:57:08.322 +01:00 [DBG] Connection 0HMP9EJJNDIUL established using the following protocol: "Tls13"
2023-03-20 19:57:08.376 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 19:57:08.409 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 19:57:08.488 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 19:57:08.590 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 19:57:08.590 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 19:57:08.595 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 221.8114ms
2023-03-20 19:57:08.595 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.6484ms
2023-03-20 19:57:08.604 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 19:57:08.621 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.4692ms
2023-03-20 19:57:08.684 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 19:57:08.778 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 93.8848ms
2023-03-20 19:57:27.397 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 19:57:27.400 +01:00 [DBG] POST requests are not supported
2023-03-20 19:57:27.417 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 19:57:27.420 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 19:57:27.422 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:57:27.424 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:57:27.445 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 19:57:27.447 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 19:57:27.448 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 19:57:27.449 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 19:57:27.450 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 19:57:27.451 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 19:57:27.452 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:57:27.555 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 19:57:27.745 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 19:57:27.749 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:57:27.750 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 19:57:27.752 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:57:27.752 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:57:27.753 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 19:57:27.755 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 19:57:27.756 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:57:27.757 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 19:57:27.758 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:57:27.759 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:57:27.760 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 19:57:27.761 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 19:57:27.762 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:57:27.763 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 19:57:27.764 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:57:27.765 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 19:57:27.772 +01:00 [DBG] Connection id "0HMP9EJJNDIUL", Request id "0HMP9EJJNDIUL:00000009": started reading request body.
2023-03-20 19:57:27.773 +01:00 [DBG] Connection id "0HMP9EJJNDIUL", Request id "0HMP9EJJNDIUL:00000009": done reading request body.
2023-03-20 19:57:27.875 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:57:27.876 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:57:27.877 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 19:57:27.883 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 19:57:28.352 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 19:57:28.380 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 19:57:28.540 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 19:57:28.579 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 19:57:28.632 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (49ms).
2023-03-20 19:57:28.644 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:57:28.658 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:57:28.669 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:57:28.691 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 19:57:28.707 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:57:28.726 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:57:28.727 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 19:57:28.733 +01:00 [DBG] A data reader was disposed.
2023-03-20 19:57:28.739 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 19:57:28.745 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 19:57:28.752 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 19:57:28.754 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 19:57:28.767 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 19:57:28.771 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 19:57:48.016 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 19:57:48.020 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 19:57:48.021 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 19:57:48.022 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 19:57:48.033 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 19:57:48.039 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 19:57:48.041 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 19:57:48.082 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 20622.6105ms
2023-03-20 19:57:48.083 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 19:57:48.087 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 19:57:48.091 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 20693.7102ms
2023-03-20 19:59:27.767 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 19:59:37.781 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:59:37.785 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0542ms - processed: 0 items - remaining: 1 items
2023-03-20 19:59:47.791 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:59:47.792 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0044ms - processed: 0 items - remaining: 1 items
2023-03-20 19:59:57.795 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 19:59:57.796 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:00:07.817 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:00:07.818 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:00:17.834 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:00:17.834 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:00:37.780 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:00:37.871 +01:00 [DBG] Hosting starting
2023-03-20 20:00:37.981 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:00:38.015 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:00:38.016 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:00:38.017 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:00:38.017 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:00:38.018 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:00:38.019 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:00:38.020 +01:00 [INF] Hosting environment: Development
2023-03-20 20:00:38.021 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:00:38.021 +01:00 [DBG] Hosting started
2023-03-20 20:00:38.300 +01:00 [DBG] Connection id "0HMP9ELIDK6L8" accepted.
2023-03-20 20:00:38.302 +01:00 [DBG] Connection id "0HMP9ELIDK6L8" started.
2023-03-20 20:00:38.303 +01:00 [DBG] Connection id "0HMP9ELIDK6L9" accepted.
2023-03-20 20:00:38.304 +01:00 [DBG] Connection id "0HMP9ELIDK6L9" started.
2023-03-20 20:00:38.320 +01:00 [DBG] Connection id "0HMP9ELIDK6L8" received FIN.
2023-03-20 20:00:38.320 +01:00 [DBG] Connection id "0HMP9ELIDK6L9" received FIN.
2023-03-20 20:00:38.331 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:00:38.331 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:00:38.356 +01:00 [DBG] Connection id "0HMP9ELIDK6L8" stopped.
2023-03-20 20:00:38.356 +01:00 [DBG] Connection id "0HMP9ELIDK6L9" stopped.
2023-03-20 20:00:38.359 +01:00 [DBG] Connection id "0HMP9ELIDK6L8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:00:38.359 +01:00 [DBG] Connection id "0HMP9ELIDK6L9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:00:38.892 +01:00 [DBG] Connection id "0HMP9ELIDK6LA" accepted.
2023-03-20 20:00:38.895 +01:00 [DBG] Connection id "0HMP9ELIDK6LA" started.
2023-03-20 20:00:38.929 +01:00 [DBG] Connection 0HMP9ELIDK6LA established using the following protocol: "Tls13"
2023-03-20 20:00:38.984 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:00:39.014 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:00:39.108 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:00:39.221 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:00:39.224 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:00:39.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 245.6298ms
2023-03-20 20:00:39.229 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.5394ms
2023-03-20 20:00:39.239 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:00:39.256 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 17.3738ms
2023-03-20 20:00:39.328 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:00:39.428 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 99.4376ms
2023-03-20 20:00:48.033 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:00:48.106 +01:00 [DBG] Hosting starting
2023-03-20 20:00:48.193 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:00:48.217 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:00:48.217 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:00:48.218 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:00:48.218 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:00:48.219 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:00:48.220 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:00:48.220 +01:00 [INF] Hosting environment: Development
2023-03-20 20:00:48.221 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:00:48.222 +01:00 [DBG] Hosting started
2023-03-20 20:00:48.424 +01:00 [DBG] Connection id "0HMP9ELLE5EE5" accepted.
2023-03-20 20:00:48.426 +01:00 [DBG] Connection id "0HMP9ELLE5EE5" started.
2023-03-20 20:00:48.429 +01:00 [DBG] Connection id "0HMP9ELLE5EE6" accepted.
2023-03-20 20:00:48.431 +01:00 [DBG] Connection id "0HMP9ELLE5EE6" started.
2023-03-20 20:00:48.463 +01:00 [DBG] Connection id "0HMP9ELLE5EE6" received FIN.
2023-03-20 20:00:48.463 +01:00 [DBG] Connection id "0HMP9ELLE5EE5" received FIN.
2023-03-20 20:00:48.478 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:00:48.478 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:00:48.511 +01:00 [DBG] Connection id "0HMP9ELLE5EE5" stopped.
2023-03-20 20:00:48.511 +01:00 [DBG] Connection id "0HMP9ELLE5EE6" stopped.
2023-03-20 20:00:48.515 +01:00 [DBG] Connection id "0HMP9ELLE5EE6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:00:48.515 +01:00 [DBG] Connection id "0HMP9ELLE5EE5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:00:48.999 +01:00 [DBG] Connection id "0HMP9ELLE5EE7" accepted.
2023-03-20 20:00:49.000 +01:00 [DBG] Connection id "0HMP9ELLE5EE7" started.
2023-03-20 20:00:49.042 +01:00 [DBG] Connection 0HMP9ELLE5EE7 established using the following protocol: "Tls13"
2023-03-20 20:00:49.095 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:00:49.129 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:00:49.215 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:00:49.337 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:00:49.341 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:00:49.347 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 254.2375ms
2023-03-20 20:00:49.349 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 7.4590ms
2023-03-20 20:00:49.352 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:00:49.378 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 25.9751ms
2023-03-20 20:00:49.465 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:00:49.570 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 104.4511ms
2023-03-20 20:01:05.019 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:01:05.021 +01:00 [DBG] POST requests are not supported
2023-03-20 20:01:05.039 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:01:05.043 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:01:05.044 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:01:05.046 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:01:05.068 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:01:05.070 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:01:05.070 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:01:05.071 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:01:05.073 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:01:05.074 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:01:05.075 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:01:05.177 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 20:01:05.366 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:01:05.369 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:01:05.371 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:01:05.372 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:01:05.373 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:01:05.374 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:01:05.376 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:01:05.378 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:01:05.378 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:01:05.379 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:01:05.380 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:01:05.381 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:01:05.381 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:01:05.382 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:01:05.383 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:01:05.384 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:01:05.385 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:01:05.393 +01:00 [DBG] Connection id "0HMP9ELLE5EE7", Request id "0HMP9ELLE5EE7:00000009": started reading request body.
2023-03-20 20:01:05.394 +01:00 [DBG] Connection id "0HMP9ELLE5EE7", Request id "0HMP9ELLE5EE7:00000009": done reading request body.
2023-03-20 20:01:05.493 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:01:05.494 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:01:05.495 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:01:05.501 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:01:05.977 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:01:06.005 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 20:01:06.157 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 20:01:06.194 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:01:06.243 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-03-20 20:01:06.252 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:01:06.267 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:01:06.276 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:01:06.298 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:01:06.313 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:01:06.331 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:01:06.337 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:01:06.344 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:01:06.350 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:01:06.355 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:01:06.361 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:01:06.364 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:01:06.376 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:01:06.381 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:01:07.754 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 2675.341ms
2023-03-20 20:01:07.756 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:01:07.757 +01:00 [ERR] An unhandled exception has occurred while executing the request.
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation was interrupted: AMQP close-reason, initiated by Peer, code=405, text='RESOURCE_LOCKED - cannot obtain exclusive access to locked queue 'ticketSold' in vhost '/'. It could be originally declared on another connection or the exclusive property value does not match that of the original declaration.', classId=50, methodId=10
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply(TimeSpan timeout)
   at RabbitMQ.Client.Impl.ModelBase.QueueDeclare(String queue, Boolean passive, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at RabbitMQ.Client.Impl.AutorecoveringModel.QueueDeclare(String queue, Boolean durable, Boolean exclusive, Boolean autoDelete, IDictionary`2 arguments)
   at Tickets.API.Services.MessageProducer.SendingMessage[T](T message) in C:\Aleksandar\demo\CityInfo\Tickets.API\Services\MessageProducer.cs:line 22
   at Tickets.API.Controllers.TicketsController.NewTicketBought(Int32 cityId, Int32 pointOfInterestId, BoughtTicketDto boughtTicket) in C:\Aleksandar\demo\CityInfo\Tickets.API\Controllers\TicketsController.cs:line 80
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-03-20 20:01:07.775 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 20:01:07.778 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 500 - text/plain;+charset=utf-8 2759.1668ms
2023-03-20 20:03:05.389 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 20:03:15.406 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:03:15.410 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0501ms - processed: 0 items - remaining: 1 items
2023-03-20 20:05:51.988 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:05:52.149 +01:00 [DBG] Hosting starting
2023-03-20 20:05:52.255 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:05:52.280 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:05:52.281 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:05:52.282 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:05:52.283 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:05:52.284 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:05:52.285 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:05:52.286 +01:00 [INF] Hosting environment: Development
2023-03-20 20:05:52.287 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:05:52.288 +01:00 [DBG] Hosting started
2023-03-20 20:05:52.425 +01:00 [DBG] Connection id "0HMP9EOG1B8BB" accepted.
2023-03-20 20:05:52.425 +01:00 [DBG] Connection id "0HMP9EOG1B8BA" accepted.
2023-03-20 20:05:52.427 +01:00 [DBG] Connection id "0HMP9EOG1B8BA" started.
2023-03-20 20:05:52.427 +01:00 [DBG] Connection id "0HMP9EOG1B8BB" started.
2023-03-20 20:05:52.451 +01:00 [DBG] Connection id "0HMP9EOG1B8BA" received FIN.
2023-03-20 20:05:52.451 +01:00 [DBG] Connection id "0HMP9EOG1B8BB" received FIN.
2023-03-20 20:05:52.470 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:05:52.470 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:05:52.500 +01:00 [DBG] Connection id "0HMP9EOG1B8BA" stopped.
2023-03-20 20:05:52.500 +01:00 [DBG] Connection id "0HMP9EOG1B8BB" stopped.
2023-03-20 20:05:52.503 +01:00 [DBG] Connection id "0HMP9EOG1B8BB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:05:52.503 +01:00 [DBG] Connection id "0HMP9EOG1B8BA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:05:53.049 +01:00 [DBG] Connection id "0HMP9EOG1B8BC" accepted.
2023-03-20 20:05:53.051 +01:00 [DBG] Connection id "0HMP9EOG1B8BC" started.
2023-03-20 20:05:53.088 +01:00 [DBG] Connection 0HMP9EOG1B8BC established using the following protocol: "Tls13"
2023-03-20 20:05:53.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:05:53.190 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:05:53.274 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:05:53.372 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:05:53.376 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 224.6913ms
2023-03-20 20:05:53.383 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:05:53.387 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.9106ms
2023-03-20 20:05:53.390 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:05:53.404 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 13.4457ms
2023-03-20 20:05:53.473 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:05:53.579 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 106.6475ms
2023-03-20 20:06:42.936 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:06:42.941 +01:00 [DBG] POST requests are not supported
2023-03-20 20:06:42.957 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:06:42.961 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:06:42.962 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:06:42.965 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:06:42.987 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:06:42.988 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:06:42.989 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:06:42.990 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:06:42.991 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:06:42.992 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:06:42.993 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:06:43.093 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 20:06:43.278 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:06:43.282 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:06:43.284 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:06:43.285 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:06:43.286 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:06:43.286 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:06:43.288 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:06:43.290 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:06:43.291 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:06:43.292 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:06:43.293 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:06:43.293 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:06:43.294 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:06:43.295 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:06:43.296 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:06:43.297 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:06:43.298 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:06:43.305 +01:00 [DBG] Connection id "0HMP9EOG1B8BC", Request id "0HMP9EOG1B8BC:00000009": started reading request body.
2023-03-20 20:06:43.306 +01:00 [DBG] Connection id "0HMP9EOG1B8BC", Request id "0HMP9EOG1B8BC:00000009": done reading request body.
2023-03-20 20:06:43.404 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:06:43.406 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:06:43.407 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:06:43.412 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:06:43.888 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:06:43.916 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 20:06:44.066 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 20:06:44.103 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:06:44.150 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (44ms).
2023-03-20 20:06:44.160 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:06:44.173 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:06:44.182 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:06:44.204 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:06:44.220 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:06:44.240 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:06:44.241 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:06:44.247 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:06:44.254 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:06:44.259 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:06:44.265 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:06:44.268 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:06:44.281 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:06:44.285 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:06:46.273 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:06:46.276 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 20:06:46.278 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 20:06:46.278 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 20:06:46.289 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 20:06:46.296 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 20:06:46.297 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 20:06:46.336 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 3337.8444ms
2023-03-20 20:06:46.338 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:06:46.342 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 20:06:46.345 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 3409.4479ms
2023-03-20 20:08:43.281 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 20:08:53.307 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:08:53.311 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0431ms - processed: 0 items - remaining: 1 items
2023-03-20 20:09:03.314 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:09:03.316 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:09:13.324 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:09:13.326 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:09:23.331 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:09:23.332 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:09:46.824 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:09:46.912 +01:00 [DBG] Hosting starting
2023-03-20 20:19:18.427 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:19:18.512 +01:00 [DBG] Hosting starting
2023-03-20 20:19:37.622 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:19:37.656 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:19:37.657 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:19:37.657 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:19:37.658 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:19:37.659 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:19:37.660 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:19:37.661 +01:00 [INF] Hosting environment: Development
2023-03-20 20:19:37.661 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:19:37.662 +01:00 [DBG] Hosting started
2023-03-20 20:19:37.966 +01:00 [DBG] Connection id "0HMP9F062AGL6" accepted.
2023-03-20 20:19:37.967 +01:00 [DBG] Connection id "0HMP9F062AGL6" started.
2023-03-20 20:19:37.972 +01:00 [DBG] Connection id "0HMP9F062AGL6" received FIN.
2023-03-20 20:19:37.979 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:19:38.001 +01:00 [DBG] Connection id "0HMP9F062AGL6" stopped.
2023-03-20 20:19:38.004 +01:00 [DBG] Connection id "0HMP9F062AGL6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:19:38.346 +01:00 [DBG] Connection id "0HMP9F062AGL7" accepted.
2023-03-20 20:19:38.348 +01:00 [DBG] Connection id "0HMP9F062AGL7" started.
2023-03-20 20:19:38.384 +01:00 [DBG] Connection 0HMP9F062AGL7 established using the following protocol: "Tls13"
2023-03-20 20:19:38.462 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:19:38.506 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:19:38.642 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:19:38.766 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:19:38.770 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 314.6371ms
2023-03-20 20:19:38.776 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:19:38.780 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.1267ms
2023-03-20 20:19:38.784 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:19:38.800 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.6489ms
2023-03-20 20:19:38.871 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:19:38.986 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.7016ms
2023-03-20 20:21:29.242 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:21:29.247 +01:00 [DBG] POST requests are not supported
2023-03-20 20:21:29.265 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:21:29.268 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:21:29.270 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:21:29.272 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:21:29.295 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:21:29.297 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:21:29.298 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:21:29.298 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:21:29.300 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:21:29.301 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:21:29.302 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:21:29.403 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 20:21:29.592 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:21:29.596 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:21:29.598 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:21:29.599 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:21:29.600 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:21:29.600 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:21:29.602 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:21:29.604 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:21:29.605 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:21:29.606 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:21:29.607 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:21:29.607 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:21:29.608 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:21:29.609 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:21:29.610 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:21:29.612 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:21:29.612 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:21:29.620 +01:00 [DBG] Connection id "0HMP9F062AGL7", Request id "0HMP9F062AGL7:00000009": started reading request body.
2023-03-20 20:21:29.621 +01:00 [DBG] Connection id "0HMP9F062AGL7", Request id "0HMP9F062AGL7:00000009": done reading request body.
2023-03-20 20:21:29.728 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:21:29.729 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:21:29.729 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:21:29.735 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:21:30.206 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:21:30.234 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 20:21:30.381 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 20:21:30.417 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:21:30.463 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (42ms).
2023-03-20 20:21:30.472 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:21:30.485 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:21:30.495 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:21:30.517 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:21:30.532 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:21:30.551 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:21:30.552 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:21:30.559 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:21:30.565 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:21:30.571 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:21:30.577 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:21:30.580 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:21:30.592 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:21:30.596 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:21:47.014 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:21:59.585 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 20:21:59.587 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 20:21:59.588 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 20:21:59.603 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 20:21:59.609 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 20:21:59.611 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 20:21:59.650 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 30344.7833ms
2023-03-20 20:21:59.652 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:21:59.656 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 20:21:59.660 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 30418.1838ms
2023-03-20 20:23:29.596 +01:00 [DBG] HttpMessageHandler expired after 120000ms for client 'ICityInfoService'
2023-03-20 20:23:39.604 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:23:39.608 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0565ms - processed: 0 items - remaining: 1 items
2023-03-20 20:23:49.618 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:23:49.619 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2023-03-20 20:23:59.625 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:23:59.626 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:24:09.645 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:24:09.646 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:24:19.669 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:24:19.670 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:24:29.671 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:24:29.672 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 20:24:39.692 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:24:39.693 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:24:49.693 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:24:49.693 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:24:59.705 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:24:59.705 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:25:09.714 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:25:09.715 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:25:19.724 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:25:19.725 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:25:29.740 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:25:29.741 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:25:39.754 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:25:39.755 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:25:49.768 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:25:49.770 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:25:59.781 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:25:59.782 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:26:09.791 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:26:09.793 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:26:19.796 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:26:19.797 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:26:29.812 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:26:29.813 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:26:39.823 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:26:39.824 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:26:49.827 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:26:49.828 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:26:59.841 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:26:59.842 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:27:09.862 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:27:09.863 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:27:19.866 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:27:19.867 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:27:29.881 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:27:29.882 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:27:39.891 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:27:39.892 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:27:49.908 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:27:49.909 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:27:59.922 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:27:59.923 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:28:09.931 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:28:09.932 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:28:19.935 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:28:19.937 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:28:29.951 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:28:29.953 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 20:28:39.962 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:28:39.963 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:28:49.973 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:28:49.974 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:28:59.980 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:28:59.981 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:29:09.991 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:29:09.992 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:29:20.013 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:29:20.014 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:29:30.016 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:29:30.017 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:29:40.034 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:29:40.035 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:29:50.049 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:29:50.050 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:30:00.052 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:30:00.054 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:30:10.065 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:30:10.067 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:30:20.085 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:30:20.087 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2023-03-20 20:30:30.099 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:30:30.101 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:30:40.114 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:30:40.115 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2023-03-20 20:30:50.125 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:30:50.126 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:31:00.134 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:31:00.135 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2023-03-20 20:31:10.151 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:31:10.152 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:31:20.168 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:31:20.170 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0043ms - processed: 0 items - remaining: 1 items
2023-03-20 20:31:30.177 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:31:30.178 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2023-03-20 20:31:40.189 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:31:40.190 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2023-03-20 20:31:50.203 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:31:50.205 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:32:00.217 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:32:00.218 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:32:10.226 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:32:10.227 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:32:20.246 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:32:20.248 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:32:30.259 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:32:30.260 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:32:40.259 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:32:40.260 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:32:50.261 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:32:50.263 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:33:00.264 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:33:00.265 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:33:10.283 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:33:10.284 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:33:20.298 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:33:20.299 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:33:30.314 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:33:30.316 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 20:33:40.318 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:33:40.319 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:33:50.324 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:33:50.325 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2023-03-20 20:34:00.334 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:34:00.335 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:34:10.345 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:34:10.346 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:34:20.360 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:34:20.361 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:34:30.374 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:34:30.376 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2023-03-20 20:34:40.385 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:34:40.387 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:34:50.387 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:34:50.388 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2023-03-20 20:35:00.394 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:35:00.395 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:35:10.399 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:35:10.401 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2023-03-20 20:35:20.410 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:35:20.411 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:35:30.425 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:35:30.428 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:35:40.440 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:35:40.442 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:35:50.452 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:35:50.453 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:36:00.474 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:36:00.475 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2023-03-20 20:36:10.489 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:36:10.490 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2023-03-20 20:36:20.494 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:36:20.495 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:36:30.507 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:36:30.508 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:36:40.509 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:36:40.510 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:36:50.514 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:36:50.514 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:37:00.529 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:37:00.531 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2023-03-20 20:37:10.541 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:37:10.542 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:37:20.553 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:37:20.554 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:37:30.565 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:37:30.566 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:37:40.570 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:37:40.571 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:37:50.584 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:37:50.585 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2023-03-20 20:38:00.598 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:38:00.599 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:38:10.614 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:38:10.615 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:38:20.619 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:38:20.620 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:38:30.627 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:38:30.628 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:38:40.643 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:38:40.645 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:38:50.648 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:38:50.650 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2023-03-20 20:39:00.648 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:39:00.650 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:39:10.661 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:39:10.663 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:39:20.676 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:39:20.677 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:39:30.697 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:39:30.697 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:39:40.712 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:39:40.713 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:39:50.725 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:39:50.726 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2023-03-20 20:40:00.739 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:40:00.740 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:40:10.751 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:40:10.752 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:40:20.767 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:40:20.768 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:40:30.780 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:40:30.781 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:40:40.785 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:40:40.787 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:40:50.801 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:40:50.802 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:41:00.818 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:41:00.819 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:41:10.837 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:41:10.839 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2023-03-20 20:41:20.842 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:41:20.843 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:41:30.859 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:41:30.860 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2023-03-20 20:41:40.865 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:41:40.865 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:41:50.869 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:41:50.870 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:42:00.872 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:42:00.872 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:42:10.878 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:42:10.879 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2023-03-20 20:42:20.886 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:42:20.888 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2023-03-20 20:42:30.916 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:42:30.918 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:42:40.922 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:42:40.924 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2023-03-20 20:42:50.931 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:42:50.932 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2023-03-20 20:43:00.947 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:43:00.948 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2023-03-20 20:43:10.951 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:43:10.952 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:43:20.963 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:43:20.964 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:43:30.966 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:43:30.968 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2023-03-20 20:43:40.978 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:43:40.979 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:43:50.983 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:43:50.984 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2023-03-20 20:44:01.006 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:44:01.008 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2023-03-20 20:44:11.015 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:44:11.016 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2023-03-20 20:44:21.021 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:44:21.023 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2023-03-20 20:44:31.031 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:44:31.032 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2023-03-20 20:44:41.040 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:44:41.042 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:44:51.044 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:44:51.045 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2023-03-20 20:45:01.061 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:45:01.062 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:45:11.072 +01:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2023-03-20 20:45:11.073 +01:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2023-03-20 20:45:31.389 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:45:31.475 +01:00 [DBG] Hosting starting
2023-03-20 20:45:31.589 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:45:31.622 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:45:31.623 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:45:31.624 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:45:31.625 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:45:31.626 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:45:31.627 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:45:31.628 +01:00 [INF] Hosting environment: Development
2023-03-20 20:45:31.629 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:45:31.630 +01:00 [DBG] Hosting started
2023-03-20 20:45:31.755 +01:00 [DBG] Connection id "0HMP9FEL4D61H" accepted.
2023-03-20 20:45:31.757 +01:00 [DBG] Connection id "0HMP9FEL4D61I" accepted.
2023-03-20 20:45:31.759 +01:00 [DBG] Connection id "0HMP9FEL4D61H" started.
2023-03-20 20:45:31.759 +01:00 [DBG] Connection id "0HMP9FEL4D61I" started.
2023-03-20 20:45:31.792 +01:00 [DBG] Connection id "0HMP9FEL4D61H" received FIN.
2023-03-20 20:45:31.792 +01:00 [DBG] Connection id "0HMP9FEL4D61I" received FIN.
2023-03-20 20:45:31.806 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:45:31.806 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:45:31.835 +01:00 [DBG] Connection id "0HMP9FEL4D61H" stopped.
2023-03-20 20:45:31.835 +01:00 [DBG] Connection id "0HMP9FEL4D61I" stopped.
2023-03-20 20:45:31.838 +01:00 [DBG] Connection id "0HMP9FEL4D61H" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:45:31.838 +01:00 [DBG] Connection id "0HMP9FEL4D61I" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:45:32.334 +01:00 [DBG] Connection id "0HMP9FEL4D61J" accepted.
2023-03-20 20:45:32.335 +01:00 [DBG] Connection id "0HMP9FEL4D61J" started.
2023-03-20 20:45:32.393 +01:00 [DBG] Connection 0HMP9FEL4D61J established using the following protocol: "Tls13"
2023-03-20 20:45:32.481 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:45:32.523 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:45:32.652 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:45:32.761 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:45:32.765 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 288.6708ms
2023-03-20 20:45:32.774 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:45:32.779 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 5.0598ms
2023-03-20 20:45:32.786 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:45:32.803 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.6605ms
2023-03-20 20:45:32.890 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:45:33.006 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.7653ms
2023-03-20 20:46:20.126 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:46:20.132 +01:00 [DBG] POST requests are not supported
2023-03-20 20:46:20.149 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:46:20.153 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:46:20.155 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:46:20.157 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:46:20.178 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:46:20.180 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:46:20.181 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:46:20.182 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:46:20.183 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:46:20.184 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:46:20.185 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:46:20.286 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 20:46:20.474 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:46:20.478 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:46:20.480 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:46:20.481 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:46:20.482 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:46:20.483 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:46:20.485 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:46:20.487 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:46:20.488 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:46:20.489 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:46:20.490 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:46:20.491 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:46:20.492 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:46:20.492 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:46:20.494 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:46:20.495 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:46:20.496 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:46:20.503 +01:00 [DBG] Connection id "0HMP9FEL4D61J", Request id "0HMP9FEL4D61J:00000009": started reading request body.
2023-03-20 20:46:20.504 +01:00 [DBG] Connection id "0HMP9FEL4D61J", Request id "0HMP9FEL4D61J:00000009": done reading request body.
2023-03-20 20:46:20.604 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:46:20.605 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:46:20.606 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:46:20.611 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:46:21.072 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:46:21.098 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 20:46:21.247 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 20:46:21.285 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:46:21.331 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (43ms).
2023-03-20 20:46:21.341 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:46:21.355 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:46:21.364 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:46:21.382 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:46:21.398 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:46:21.419 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:46:21.420 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:46:21.426 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:46:21.432 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:46:21.437 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:46:21.444 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:46:21.446 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:46:21.458 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:46:21.463 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:46:24.138 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:46:24.142 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 20:46:24.143 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 20:46:24.144 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 20:46:24.156 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 20:47:53.338 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:47:53.435 +01:00 [DBG] Hosting starting
2023-03-20 20:47:53.557 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:47:53.590 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:47:53.591 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:47:53.592 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:47:53.593 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:47:53.594 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:47:53.595 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:47:53.596 +01:00 [INF] Hosting environment: Development
2023-03-20 20:47:53.597 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:47:53.597 +01:00 [DBG] Hosting started
2023-03-20 20:47:53.749 +01:00 [DBG] Connection id "0HMP9FFVEI4JU" accepted.
2023-03-20 20:47:53.751 +01:00 [DBG] Connection id "0HMP9FFVEI4JU" started.
2023-03-20 20:47:53.753 +01:00 [DBG] Connection id "0HMP9FFVEI4JV" accepted.
2023-03-20 20:47:53.754 +01:00 [DBG] Connection id "0HMP9FFVEI4JV" started.
2023-03-20 20:47:53.787 +01:00 [DBG] Connection id "0HMP9FFVEI4JU" received FIN.
2023-03-20 20:47:53.787 +01:00 [DBG] Connection id "0HMP9FFVEI4JV" received FIN.
2023-03-20 20:47:53.802 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:47:53.802 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:47:53.833 +01:00 [DBG] Connection id "0HMP9FFVEI4JV" stopped.
2023-03-20 20:47:53.833 +01:00 [DBG] Connection id "0HMP9FFVEI4JU" stopped.
2023-03-20 20:47:53.836 +01:00 [DBG] Connection id "0HMP9FFVEI4JU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:47:53.836 +01:00 [DBG] Connection id "0HMP9FFVEI4JV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:47:54.469 +01:00 [DBG] Connection id "0HMP9FFVEI4K0" accepted.
2023-03-20 20:47:54.472 +01:00 [DBG] Connection id "0HMP9FFVEI4K0" started.
2023-03-20 20:47:54.531 +01:00 [DBG] Connection 0HMP9FFVEI4K0 established using the following protocol: "Tls13"
2023-03-20 20:47:54.596 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:47:54.630 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:47:54.719 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:47:54.832 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:47:54.838 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 246.0307ms
2023-03-20 20:47:54.847 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:47:54.854 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 6.7853ms
2023-03-20 20:47:54.859 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:47:54.882 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.4781ms
2023-03-20 20:47:54.948 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:47:55.040 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.2745ms
2023-03-20 20:48:09.176 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:48:09.179 +01:00 [DBG] POST requests are not supported
2023-03-20 20:48:09.198 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:48:09.202 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:48:09.203 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:09.205 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:09.227 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:48:09.229 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:48:09.230 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:48:09.231 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:48:09.232 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:48:09.233 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:48:09.234 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:48:09.337 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 20:48:09.521 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:48:09.526 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:48:09.528 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:48:09.529 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:09.530 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:09.531 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:48:09.532 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:09.534 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:48:09.535 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:48:09.536 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:09.537 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:09.537 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:48:09.538 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:09.539 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:48:09.540 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:48:09.542 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:48:09.543 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:48:09.549 +01:00 [DBG] Connection id "0HMP9FFVEI4K0", Request id "0HMP9FFVEI4K0:00000009": started reading request body.
2023-03-20 20:48:09.550 +01:00 [DBG] Connection id "0HMP9FFVEI4K0", Request id "0HMP9FFVEI4K0:00000009": done reading request body.
2023-03-20 20:48:09.653 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:09.654 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:09.655 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:48:09.661 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:10.141 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:48:10.167 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 20:48:10.317 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 20:48:10.355 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:48:10.401 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (43ms).
2023-03-20 20:48:10.411 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:48:10.425 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:48:10.434 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:48:10.456 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:48:10.471 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:10.491 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:10.492 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:10.498 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:48:10.505 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:48:10.511 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:48:10.517 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:48:10.519 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:48:10.532 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:48:10.536 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:48:10.679 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:48:10.682 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-03-20 20:48:10.683 +01:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-03-20 20:48:10.684 +01:00 [WRN] No output formatter was found for content types '["text/plain"]' to write the response.
2023-03-20 20:48:10.689 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 1451.844ms
2023-03-20 20:48:10.690 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:10.695 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 20:48:10.699 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 406 0 - 1522.0158ms
2023-03-20 20:48:16.146 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:48:16.146 +01:00 [DBG] POST requests are not supported
2023-03-20 20:48:16.147 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:48:16.148 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:48:16.149 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:16.150 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:16.150 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:48:16.152 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:48:16.153 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:48:16.154 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:48:16.155 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:48:16.156 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:48:16.157 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:48:16.164 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:48:16.170 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:48:16.171 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:48:16.172 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:16.173 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:16.174 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:48:16.174 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:16.175 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:48:16.176 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:48:16.177 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:16.178 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:16.179 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:48:16.180 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:16.181 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:48:16.182 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:48:16.183 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:48:16.184 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:48:16.184 +01:00 [DBG] Connection id "0HMP9FFVEI4K0", Request id "0HMP9FFVEI4K0:0000000B": started reading request body.
2023-03-20 20:48:16.185 +01:00 [DBG] Connection id "0HMP9FFVEI4K0", Request id "0HMP9FFVEI4K0:0000000B": done reading request body.
2023-03-20 20:48:16.186 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:16.187 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:16.188 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:48:16.189 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:16.191 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:48:16.194 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:48:16.195 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-03-20 20:48:16.196 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:48:16.197 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:48:16.198 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:48:16.199 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:48:16.200 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:16.201 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:16.202 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:16.203 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:48:16.203 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:48:16.204 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:48:16.205 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:48:16.206 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:48:16.206 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:48:16.207 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:48:16.218 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:48:16.220 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 20:48:16.222 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 20:48:16.223 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 20:48:16.235 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 20:48:16.243 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 20:48:16.244 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 20:48:16.279 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 121.9601ms
2023-03-20 20:48:16.280 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:16.280 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 20:48:16.281 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 135.8541ms
2023-03-20 20:48:51.639 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:48:51.642 +01:00 [DBG] POST requests are not supported
2023-03-20 20:48:51.643 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:48:51.643 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:48:51.644 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:51.645 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:48:51.646 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:48:51.647 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:48:51.648 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:48:51.649 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:48:51.650 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:48:51.651 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:48:51.652 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:48:51.655 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:48:51.656 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:48:51.657 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:48:51.658 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:51.660 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:51.660 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:48:51.661 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:48:51.662 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:48:51.663 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:48:51.664 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:51.664 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:51.665 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:48:51.666 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:48:51.666 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:48:51.667 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:48:51.668 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:48:51.669 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:48:51.670 +01:00 [DBG] Connection id "0HMP9FFVEI4K0", Request id "0HMP9FFVEI4K0:0000000D": started reading request body.
2023-03-20 20:48:51.670 +01:00 [DBG] Connection id "0HMP9FFVEI4K0", Request id "0HMP9FFVEI4K0:0000000D": done reading request body.
2023-03-20 20:48:51.671 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:51.672 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:51.673 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:48:51.673 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:48:51.706 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:48:51.708 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:48:51.709 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-03-20 20:48:51.710 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:48:51.711 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:48:51.711 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:48:51.713 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:48:51.714 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:51.714 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:51.715 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:48:51.716 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:48:51.716 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:48:51.717 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:48:51.718 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:48:51.718 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:48:51.719 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:48:51.720 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:48:51.735 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:48:51.737 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 20:48:51.737 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 20:48:51.738 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 20:48:51.739 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 20:48:51.740 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 20:50:59.993 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 20:51:00.085 +01:00 [DBG] Hosting starting
2023-03-20 20:51:00.232 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 20:51:00.265 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 20:51:00.267 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 20:51:00.268 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 20:51:00.269 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 20:51:00.269 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 20:51:00.270 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 20:51:00.271 +01:00 [INF] Hosting environment: Development
2023-03-20 20:51:00.272 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 20:51:00.272 +01:00 [DBG] Hosting started
2023-03-20 20:51:00.644 +01:00 [DBG] Connection id "0HMP9FHN4U7O2" accepted.
2023-03-20 20:51:00.645 +01:00 [DBG] Connection id "0HMP9FHN4U7O2" started.
2023-03-20 20:51:00.649 +01:00 [DBG] Connection id "0HMP9FHN4U7O3" accepted.
2023-03-20 20:51:00.650 +01:00 [DBG] Connection id "0HMP9FHN4U7O3" started.
2023-03-20 20:51:00.667 +01:00 [DBG] Connection id "0HMP9FHN4U7O2" received FIN.
2023-03-20 20:51:00.667 +01:00 [DBG] Connection id "0HMP9FHN4U7O3" received FIN.
2023-03-20 20:51:00.679 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:51:00.679 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 20:51:00.711 +01:00 [DBG] Connection id "0HMP9FHN4U7O3" stopped.
2023-03-20 20:51:00.711 +01:00 [DBG] Connection id "0HMP9FHN4U7O2" stopped.
2023-03-20 20:51:00.716 +01:00 [DBG] Connection id "0HMP9FHN4U7O3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:51:00.716 +01:00 [DBG] Connection id "0HMP9FHN4U7O2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 20:51:01.190 +01:00 [DBG] Connection id "0HMP9FHN4U7O4" accepted.
2023-03-20 20:51:01.194 +01:00 [DBG] Connection id "0HMP9FHN4U7O4" started.
2023-03-20 20:51:01.235 +01:00 [DBG] Connection 0HMP9FHN4U7O4 established using the following protocol: "Tls13"
2023-03-20 20:51:01.302 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 20:51:01.335 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 20:51:01.418 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 20:51:01.524 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 20:51:01.525 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 20:51:01.528 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 230.3660ms
2023-03-20 20:51:01.530 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 4.7069ms
2023-03-20 20:51:01.541 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 20:51:01.564 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.3505ms
2023-03-20 20:51:01.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 20:51:01.740 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 101.2090ms
2023-03-20 20:51:17.558 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 20:51:17.560 +01:00 [DBG] POST requests are not supported
2023-03-20 20:51:17.579 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 20:51:17.583 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 20:51:17.584 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:51:17.586 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 20:51:17.610 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 20:51:17.612 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 20:51:17.613 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 20:51:17.614 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 20:51:17.616 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 20:51:17.617 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 20:51:17.618 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:51:17.719 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 20:51:17.909 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 20:51:17.913 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:51:17.914 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 20:51:17.916 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:51:17.917 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:51:17.917 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 20:51:17.919 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 20:51:17.921 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:51:17.922 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 20:51:17.922 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:51:17.923 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:51:17.924 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 20:51:17.925 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 20:51:17.925 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:51:17.926 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 20:51:17.928 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:51:17.929 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 20:51:17.936 +01:00 [DBG] Connection id "0HMP9FHN4U7O4", Request id "0HMP9FHN4U7O4:00000009": started reading request body.
2023-03-20 20:51:17.937 +01:00 [DBG] Connection id "0HMP9FHN4U7O4", Request id "0HMP9FHN4U7O4:00000009": done reading request body.
2023-03-20 20:51:18.036 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:51:18.037 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:51:18.038 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 20:51:18.043 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 20:51:18.531 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 20:51:18.560 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 20:51:18.715 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 20:51:18.752 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 20:51:18.798 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (43ms).
2023-03-20 20:51:18.807 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:51:18.821 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:51:18.831 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:51:18.853 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 20:51:18.869 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:51:18.888 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:51:18.890 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 20:51:18.896 +01:00 [DBG] A data reader was disposed.
2023-03-20 20:51:18.903 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 20:51:18.908 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 20:51:18.915 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 20:51:18.917 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 20:51:18.930 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 20:51:18.934 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 20:51:19.088 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 20:51:19.092 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 20:51:19.093 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 20:51:19.094 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 20:51:19.106 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 20:51:19.113 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 20:51:19.114 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 21:16:59.516 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-03-20 21:16:59.657 +01:00 [DBG] Hosting starting
2023-03-20 21:16:59.792 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 1C85E5F590EF96CCA5745C4C60AC850D1B5EF268)
2023-03-20 21:16:59.820 +01:00 [INF] Now listening on: https://localhost:7183
2023-03-20 21:16:59.821 +01:00 [INF] Now listening on: http://localhost:5183
2023-03-20 21:16:59.822 +01:00 [DBG] Loaded hosting startup assembly Tickets.API
2023-03-20 21:16:59.822 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-03-20 21:16:59.823 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-03-20 21:16:59.824 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-20 21:16:59.825 +01:00 [INF] Hosting environment: Development
2023-03-20 21:16:59.826 +01:00 [INF] Content root path: C:\Aleksandar\demo\CityInfo\Tickets.API\
2023-03-20 21:16:59.827 +01:00 [DBG] Hosting started
2023-03-20 21:17:00.205 +01:00 [DBG] Connection id "0HMP9G07U33P9" received FIN.
2023-03-20 21:17:00.212 +01:00 [DBG] Connection id "0HMP9G07U33P9" accepted.
2023-03-20 21:17:00.214 +01:00 [DBG] Connection id "0HMP9G07U33P9" started.
2023-03-20 21:17:00.229 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-03-20 21:17:00.260 +01:00 [DBG] Connection id "0HMP9G07U33P9" stopped.
2023-03-20 21:17:00.264 +01:00 [DBG] Connection id "0HMP9G07U33P9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-03-20 21:17:00.719 +01:00 [DBG] Connection id "0HMP9G07U33PA" accepted.
2023-03-20 21:17:00.720 +01:00 [DBG] Connection id "0HMP9G07U33PA" started.
2023-03-20 21:17:00.775 +01:00 [DBG] Connection 0HMP9G07U33PA established using the following protocol: "Tls13"
2023-03-20 21:17:00.832 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/index.html - -
2023-03-20 21:17:00.870 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-03-20 21:17:00.961 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-03-20 21:17:01.067 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-03-20 21:17:01.071 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/index.html - - - 200 - text/html;charset=utf-8 243.1291ms
2023-03-20 21:17:01.074 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - -
2023-03-20 21:17:01.077 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_framework/aspnetcore-browser-refresh.js - - - 200 11992 application/javascript;+charset=utf-8 3.9132ms
2023-03-20 21:17:01.085 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/_vs/browserLink - -
2023-03-20 21:17:01.105 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 19.8158ms
2023-03-20 21:17:01.180 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - -
2023-03-20 21:17:01.275 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7183/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.2000ms
2023-03-20 21:22:46.282 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90
2023-03-20 21:22:46.321 +01:00 [DBG] POST requests are not supported
2023-03-20 21:22:46.338 +01:00 [DBG] 1 candidate(s) found for the request path '/api/tickets/1/2'
2023-03-20 21:22:46.341 +01:00 [DBG] Endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)' with route pattern 'api/tickets/{cityId}/{pointOfInterestId}' is valid for the request path '/api/tickets/1/2'
2023-03-20 21:22:46.342 +01:00 [DBG] Request matched endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 21:22:46.344 +01:00 [INF] Executing endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 21:22:46.367 +01:00 [INF] Route matched with {action = "NewTicketBought", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Tickets.API.Models.BoughtTicketDto]] NewTicketBought(Int32, Int32, Tickets.API.Models.BoughtTicketDto) on controller Tickets.API.Controllers.TicketsController (Tickets.API).
2023-03-20 21:22:46.368 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-03-20 21:22:46.369 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-03-20 21:22:46.370 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-03-20 21:22:46.372 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-03-20 21:22:46.372 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-03-20 21:22:46.374 +01:00 [DBG] Executing controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 21:22:46.473 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-03-20 21:22:46.659 +01:00 [DBG] Executed controller factory for controller Tickets.API.Controllers.TicketsController (Tickets.API)
2023-03-20 21:22:46.662 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-03-20 21:22:46.664 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-03-20 21:22:46.666 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 21:22:46.667 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-03-20 21:22:46.667 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-03-20 21:22:46.669 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-03-20 21:22:46.671 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 21:22:46.672 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-03-20 21:22:46.673 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 21:22:46.674 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 21:22:46.675 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-03-20 21:22:46.675 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-03-20 21:22:46.676 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 21:22:46.677 +01:00 [DBG] Attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' using the name '' in request data ...
2023-03-20 21:22:46.679 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 21:22:46.680 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-03-20 21:22:46.687 +01:00 [DBG] Connection id "0HMP9G07U33PA", Request id "0HMP9G07U33PA:00000009": started reading request body.
2023-03-20 21:22:46.688 +01:00 [DBG] Connection id "0HMP9G07U33PA", Request id "0HMP9G07U33PA:00000009": done reading request body.
2023-03-20 21:22:46.790 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 21:22:46.791 +01:00 [DBG] Done attempting to bind parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 21:22:46.792 +01:00 [DBG] Attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto' ...
2023-03-20 21:22:46.798 +01:00 [DBG] Done attempting to validate the bound parameter 'boughtTicket' of type 'Tickets.API.Models.BoughtTicketDto'.
2023-03-20 21:22:47.282 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'TicketContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-03-20 21:22:47.310 +01:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()'
2023-03-20 21:22:47.461 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Ticket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Ticket.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Ticket.CityID (int) Required, 1], [Property: Ticket.Email (string) Required MaxLength(100), 2], [Property: Ticket.Name (string) Required MaxLength(50), 3], [Property: Ticket.PointOfInterestId (int) Required, 4] }
        SELECT t.Id, t.CityID, t.Email, t.Name, t.PointOfInterestId
        FROM Tickets AS t), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Ticket>, 
    Tickets.API.DbContexts.TicketContext, 
    False, 
    False, 
    True
)'
2023-03-20 21:22:47.499 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-03-20 21:22:47.547 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (44ms).
2023-03-20 21:22:47.557 +01:00 [DBG] Opening connection to database 'main' on server 'Ticket.db'.
2023-03-20 21:22:47.571 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 21:22:47.581 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 21:22:47.603 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."CityID", "t"."Email", "t"."Name", "t"."PointOfInterestId"
FROM "Tickets" AS "t"
2023-03-20 21:22:47.618 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 21:22:47.637 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 21:22:47.638 +01:00 [DBG] Context 'TicketContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-03-20 21:22:47.645 +01:00 [DBG] A data reader was disposed.
2023-03-20 21:22:47.652 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Aleksandar\demo\CityInfo\Tickets.API\Ticket.db'.
2023-03-20 21:22:47.657 +01:00 [DBG] Closed connection to database 'main' on server 'Ticket.db'.
2023-03-20 21:22:47.663 +01:00 [DBG] SaveChanges starting for 'TicketContext'.
2023-03-20 21:22:47.666 +01:00 [DBG] DetectChanges starting for 'TicketContext'.
2023-03-20 21:22:47.678 +01:00 [DBG] DetectChanges completed for 'TicketContext'.
2023-03-20 21:22:47.683 +01:00 [DBG] SaveChanges completed for 'TicketContext' with 0 entities written to the database.
2023-03-20 21:22:54.781 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-03-20 21:22:54.785 +01:00 [DBG] Attempting to select an output formatter based on Accept header '["application/json"]'.
2023-03-20 21:22:54.787 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-03-20 21:22:54.788 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'Tickets.API.Models.TicketDto'.
2023-03-20 21:22:54.800 +01:00 [DBG] Found the endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-03-20 21:22:54.807 +01:00 [DBG] Successfully processed template api/tickets for Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API) resulting in /api/tickets and 
2023-03-20 21:22:54.808 +01:00 [DBG] Link generation succeeded for endpoints ["Tickets.API.Controllers.TicketsController.GetAllTickets (Tickets.API)"] with result /api/tickets
2023-03-20 21:22:54.847 +01:00 [INF] Executed action Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API) in 8470.4654ms
2023-03-20 21:22:54.849 +01:00 [INF] Executed endpoint 'Tickets.API.Controllers.TicketsController.NewTicketBought (Tickets.API)'
2023-03-20 21:22:54.854 +01:00 [DBG] 'TicketContext' disposed.
2023-03-20 21:22:54.857 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7183/api/tickets/1/2 application/json-patch+json 90 - 201 80 application/json;+charset=utf-8 8575.2471ms
